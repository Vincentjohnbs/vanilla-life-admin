<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>采购订单 - 香草生活后台管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .metric-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        .metric-card.blue {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        .metric-card.green {
            background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        }
        .metric-card.orange {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        .status-draft { background: #f3f4f6; color: #374151; }
        .status-pending { background: #fef3c7; color: #92400e; }
        .status-approved { background: #dbeafe; color: #1e40af; }
        .status-shipped { background: #dcfce7; color: #166534; }
        .status-received { background: #e0e7ff; color: #3730a3; }
        .status-cancelled { background: #fed7d7; color: #991b1b; }
        .priority-high { background: #fee2e2; color: #dc2626; }
        .priority-medium { background: #fef3c7; color: #d97706; }
        .priority-low { background: #f0f9ff; color: #0369a1; }
        .filter-tag {
            transition: all 0.2s ease;
        }
        .filter-tag.active {
            background-color: #3b82f6;
            color: white;
        }
        .order-timeline {
            position: relative;
        }
        .order-timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e5e7eb;
        }
        .timeline-item {
            position: relative;
            padding-left: 40px;
            padding-bottom: 20px;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 11px;
            top: 6px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #d1d5db;
        }
        .timeline-item.completed::before {
            background: #10b981;
        }
        .timeline-item.current::before {
            background: #3b82f6;
            width: 12px;
            height: 12px;
            left: 9px;
            top: 4px;
        }
        .progress-bar {
            height: 8px;
            background: #f3f4f6;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 4px;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 侧边栏 -->
    <div id="sidebar" class="fixed left-0 top-0 w-64 h-full bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-30">
        <div class="p-6 border-b border-gray-200">
            <h1 class="text-xl font-bold text-gray-800">香草生活</h1>
            <p class="text-sm text-gray-600 mt-1">后台管理系统</p>
        </div>
        
        <nav class="mt-6">
            <div class="px-4">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">供应商管理</h3>
                <ul class="space-y-1">
                    <li><a href="71-供应商详情页.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-building mr-3"></i>供应商详情</a></li>
                    <li><a href="72-商品供应管理.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-boxes mr-3"></i>商品供应管理</a></li>
                    <li><a href="73-结算管理页.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-calculator mr-3"></i>结算管理</a></li>
                    <li><a href="74-合作协议.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-handshake mr-3"></i>合作协议</a></li>
                    <li><a href="75-资质管理.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-certificate mr-3"></i>资质管理</a></li>
                    <li><a href="76-评级管理.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-star mr-3"></i>评级管理</a></li>
                    <li><a href="77-采购订单.html" class="flex items-center px-3 py-2 text-white bg-green-600 rounded-lg"><i class="fas fa-shopping-cart mr-3"></i>采购订单</a></li>
                    <li><a href="78-对账管理.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-balance-scale mr-3"></i>对账管理</a></li>
                    <li><a href="79-付款记录.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-credit-card mr-3"></i>付款记录</a></li>
                    <li><a href="80-供应商统计.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-chart-bar mr-3"></i>供应商统计</a></li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- 主内容区域 -->
    <div class="lg:ml-64">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center">
                    <button id="sidebarToggle" class="lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="ml-4">
                        <h2 class="text-xl font-semibold text-gray-800">采购订单</h2>
                        <p class="text-sm text-gray-600">管理采购订单和供应商交易</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="createOrder" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        <i class="fas fa-plus mr-2"></i>新建订单
                    </button>
                    <button id="batchImport" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                        <i class="fas fa-file-import mr-2"></i>批量导入
                    </button>
                    <button id="exportOrders" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                        <i class="fas fa-file-export mr-2"></i>导出订单
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://via.placeholder.com/32" alt="用户头像" class="w-8 h-8 rounded-full">
                        <span class="text-sm font-medium text-gray-700">管理员</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- 页面内容 -->
        <main class="p-6">
            <!-- 统计卡片 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <div class="metric-card rounded-xl p-6 text-white card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">订单总数</p>
                            <p class="text-2xl font-bold mt-1">1,248</p>
                            <p class="text-white/80 text-sm mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+15 本月新增
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i class="fas fa-shopping-cart text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card blue rounded-xl p-6 text-white card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">待审核订单</p>
                            <p class="text-2xl font-bold mt-1">28</p>
                            <p class="text-white/80 text-sm mt-1">
                                <i class="fas fa-clock mr-1"></i>需要处理
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i class="fas fa-hourglass-half text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card green rounded-xl p-6 text-white card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">本月采购额</p>
                            <p class="text-2xl font-bold mt-1">¥186.5万</p>
                            <p class="text-white/80 text-sm mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+12.3% 环比
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card orange rounded-xl p-6 text-white card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-white/80 text-sm">平均交付时间</p>
                            <p class="text-2xl font-bold mt-1">5.2天</p>
                            <p class="text-white/80 text-sm mt-1">
                                <i class="fas fa-arrow-down mr-1"></i>-0.8天 优化
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
                            <i class="fas fa-truck text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 采购趋势图表 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">采购趋势分析</h3>
                <canvas id="purchaseTrendChart" width="400" height="150"></canvas>
            </div>

            <!-- 筛选和搜索 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                    <div class="flex flex-wrap items-center gap-4">
                        <div class="relative">
                            <input type="text" id="searchInput" placeholder="搜索订单号、供应商..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-64">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                        
                        <select id="supplierFilter" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">全部供应商</option>
                            <option value="绿野香草农场">绿野香草农场</option>
                            <option value="天然香草园">天然香草园</option>
                            <option value="有机香草基地">有机香草基地</option>
                        </select>
                        
                        <select id="priorityFilter" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="">全部优先级</option>
                            <option value="high">高优先级</option>
                            <option value="medium">中优先级</option>
                            <option value="low">低优先级</option>
                        </select>
                        
                        <input type="date" id="dateFilter" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <span class="text-sm text-gray-600">状态筛选：</span>
                        <button class="filter-tag active px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="all">全部</button>
                        <button class="filter-tag px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="draft">草稿</button>
                        <button class="filter-tag px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="pending">待审核</button>
                        <button class="filter-tag px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="approved">已审核</button>
                        <button class="filter-tag px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="shipped">已发货</button>
                        <button class="filter-tag px-3 py-1 text-xs rounded-full bg-gray-100 text-gray-700" data-status="received">已收货</button>
                    </div>
                </div>
            </div>

            <!-- 订单列表 -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900">采购订单列表</h3>
                        <div class="flex items-center space-x-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="selectAll" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                                <span class="ml-2 text-sm text-gray-600">全选</span>
                            </label>
                            <div class="relative">
                                <button id="batchActions" class="px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors">
                                    <i class="fas fa-ellipsis-v mr-1"></i>批量操作
                                </button>
                                <div id="batchMenu" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10">
                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">批量审核</a>
                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">批量取消</a>
                                    <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50">批量导出</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">订单信息</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">供应商</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">商品数量</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">订单金额</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">优先级</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- 订单数据将通过JavaScript动态生成 -->
                        </tbody>
                    </table>
                </div>
                
                <!-- 分页 -->
                <div class="px-6 py-4 border-t border-gray-200">
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-700">
                            显示 <span class="font-medium">1</span> 到 <span class="font-medium">10</span> 条，共 <span class="font-medium">156</span> 条记录
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-2 text-sm text-gray-500 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50" disabled>
                                上一页
                            </button>
                            <button class="px-3 py-2 text-sm text-white bg-blue-500 border border-blue-500 rounded-lg">1</button>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">2</button>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">3</button>
                            <span class="px-3 py-2 text-sm text-gray-500">...</span>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">16</button>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50">
                                下一页
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 订单详情模态框 -->
    <div id="orderDetailModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900">采购订单详情</h3>
            </div>
            <div class="p-6">
                <div id="orderDetailContent">
                    <!-- 订单详情内容将通过JavaScript动态生成 -->
                </div>
            </div>
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                <button id="closeOrderDetail" class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                    关闭
                </button>
                <button id="editOrder" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                    <i class="fas fa-edit mr-2"></i>编辑订单
                </button>
            </div>
        </div>
    </div>

    <!-- 新建订单模态框 -->
    <div id="createOrderModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900">新建采购订单</h3>
            </div>
            <div class="p-6">
                <form class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">供应商 *</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">请选择供应商</option>
                                <option value="绿野香草农场">绿野香草农场</option>
                                <option value="天然香草园">天然香草园</option>
                                <option value="有机香草基地">有机香草基地</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">优先级 *</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="low">低优先级</option>
                                <option value="medium" selected>中优先级</option>
                                <option value="high">高优先级</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">预期交付日期 *</label>
                            <input type="date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">收货地址 *</label>
                            <select class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">请选择收货地址</option>
                                <option value="北京仓库">北京仓库</option>
                                <option value="上海仓库">上海仓库</option>
                                <option value="广州仓库">广州仓库</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-md font-semibold text-gray-900 mb-4">采购商品</h4>
                        <div class="border border-gray-200 rounded-lg">
                            <div class="p-4 bg-gray-50 border-b border-gray-200">
                                <button type="button" id="addProduct" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                                    <i class="fas fa-plus mr-2"></i>添加商品
                                </button>
                            </div>
                            <div id="productList" class="divide-y divide-gray-200">
                                <div class="p-4 flex items-center space-x-4">
                                    <select class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">请选择商品</option>
                                        <option value="薰衣草精油">薰衣草精油</option>
                                        <option value="迷迭香干叶">迷迭香干叶</option>
                                        <option value="薄荷叶">薄荷叶</option>
                                    </select>
                                    <input type="number" placeholder="数量" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <input type="number" placeholder="单价" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                    <span class="w-24 text-sm text-gray-600">¥0.00</span>
                                    <button type="button" class="p-2 text-red-500 hover:bg-red-50 rounded-lg">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="p-4 bg-gray-50 border-t border-gray-200">
                                <div class="flex justify-between items-center">
                                    <span class="font-medium text-gray-900">订单总额：</span>
                                    <span class="text-lg font-bold text-blue-600">¥0.00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">备注说明</label>
                        <textarea rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500" placeholder="请输入订单备注和特殊要求"></textarea>
                    </div>
                </form>
            </div>
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-4">
                <button id="cancelCreateOrder" class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                    取消
                </button>
                <button id="saveDraftOrder" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors">
                    保存草稿
                </button>
                <button id="submitOrder" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                    提交订单
                </button>
            </div>
        </div>
    </div>

    <script>
        // 模拟采购订单数据
        const ordersData = [
            {
                id: 'PO202406001',
                supplier: '绿野香草农场',
                products: [
                    { name: '薰衣草精油', quantity: 50, price: 128.00 },
                    { name: '迷迭香干叶', quantity: 100, price: 45.00 }
                ],
                totalAmount: 10900.00,
                priority: 'high',
                status: 'pending',
                createTime: '2024-06-15 09:30',
                expectedDate: '2024-06-25',
                address: '北京仓库',
                notes: '急需补货，请优先处理',
                timeline: [
                    { step: '订单创建', time: '2024-06-15 09:30', status: 'completed' },
                    { step: '等待审核', time: '2024-06-15 10:00', status: 'current' },
                    { step: '供应商确认', time: '', status: 'pending' },
                    { step: '商品发货', time: '', status: 'pending' },
                    { step: '订单完成', time: '', status: 'pending' }
                ]
            },
            {
                id: 'PO202406002',
                supplier: '天然香草园',
                products: [
                    { name: '薄荷叶', quantity: 200, price: 25.00 },
                    { name: '柠檬草', quantity: 80, price: 35.00 }
                ],
                totalAmount: 7800.00,
                priority: 'medium',
                status: 'approved',
                createTime: '2024-06-14 14:20',
                expectedDate: '2024-06-22',
                address: '上海仓库',
                notes: '常规补货订单',
                timeline: [
                    { step: '订单创建', time: '2024-06-14 14:20', status: 'completed' },
                    { step: '审核通过', time: '2024-06-14 15:30', status: 'completed' },
                    { step: '供应商确认', time: '2024-06-14 16:00', status: 'completed' },
                    { step: '商品发货', time: '', status: 'current' },
                    { step: '订单完成', time: '', status: 'pending' }
                ]
            },
            {
                id: 'PO202406003',
                supplier: '有机香草基地',
                products: [
                    { name: '罗勒叶', quantity: 150, price: 38.00 },
                    { name: '百里香', quantity: 120, price: 42.00 }
                ],
                totalAmount: 10740.00,
                priority: 'low',
                status: 'shipped',
                createTime: '2024-06-12 11:15',
                expectedDate: '2024-06-20',
                address: '广州仓库',
                notes: '有机认证商品',
                timeline: [
                    { step: '订单创建', time: '2024-06-12 11:15', status: 'completed' },
                    { step: '审核通过', time: '2024-06-12 14:00', status: 'completed' },
                    { step: '供应商确认', time: '2024-06-12 16:30', status: 'completed' },
                    { step: '商品发货', time: '2024-06-13 09:00', status: 'completed' },
                    { step: '订单完成', time: '', status: 'current' }
                ]
            },
            {
                id: 'PO202406004',
                supplier: '绿色包装材料公司',
                products: [
                    { name: '环保包装盒', quantity: 1000, price: 2.50 },
                    { name: '密封袋', quantity: 2000, price: 0.80 }
                ],
                totalAmount: 4100.00,
                priority: 'medium',
                status: 'received',
                createTime: '2024-06-10 16:45',
                expectedDate: '2024-06-18',
                address: '北京仓库',
                notes: '包装材料采购',
                timeline: [
                    { step: '订单创建', time: '2024-06-10 16:45', status: 'completed' },
                    { step: '审核通过', time: '2024-06-11 09:00', status: 'completed' },
                    { step: '供应商确认', time: '2024-06-11 10:30', status: 'completed' },
                    { step: '商品发货', time: '2024-06-12 14:00', status: 'completed' },
                    { step: '订单完成', time: '2024-06-15 11:20', status: 'completed' }
                ]
            },
            {
                id: 'PO202406005',
                supplier: '快运物流服务',
                products: [
                    { name: '物流服务费', quantity: 1, price: 1200.00 }
                ],
                totalAmount: 1200.00,
                priority: 'low',
                status: 'draft',
                createTime: '2024-06-16 10:00',
                expectedDate: '2024-06-30',
                address: '全国',
                notes: '月度物流服务费',
                timeline: [
                    { step: '订单创建', time: '2024-06-16 10:00', status: 'current' },
                    { step: '等待审核', time: '', status: 'pending' },
                    { step: '供应商确认', time: '', status: 'pending' },
                    { step: '服务执行', time: '', status: 'pending' },
                    { step: '订单完成', time: '', status: 'pending' }
                ]
            }
        ];

        let filteredData = [...ordersData];
        let currentPage = 1;
        const itemsPerPage = 10;

        // 侧边栏切换
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // 状态筛选标签
        function initStatusFilters() {
            const filterTags = document.querySelectorAll('.filter-tag');
            filterTags.forEach(tag => {
                tag.addEventListener('click', function() {
                    // 移除所有active类
                    filterTags.forEach(t => t.classList.remove('active'));
                    // 添加active类到当前标签
                    this.classList.add('active');
                    
                    const status = this.getAttribute('data-status');
                    filterOrders(status);
                });
            });
        }

        // 筛选订单
        function filterOrders(status = 'all') {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const supplierFilter = document.getElementById('supplierFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;

            filteredData = ordersData.filter(order => {
                const matchesSearch = order.id.toLowerCase().includes(searchTerm) || 
                                    order.supplier.toLowerCase().includes(searchTerm);
                const matchesSupplier = !supplierFilter || order.supplier === supplierFilter;
                const matchesPriority = !priorityFilter || order.priority === priorityFilter;
                const matchesStatus = status === 'all' || order.status === status;
                const matchesDate = !dateFilter || order.createTime.includes(dateFilter);

                return matchesSearch && matchesSupplier && matchesPriority && matchesStatus && matchesDate;
            });

            renderOrdersTable();
            updateTotalCount();
        }

        // 渲染订单表格
        function renderOrdersTable() {
            const tbody = document.getElementById('ordersTableBody');
            tbody.innerHTML = '';

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageData = filteredData.slice(startIndex, endIndex);

            pageData.forEach(order => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-50';
                
                // 计算商品总数
                const totalProducts = order.products.reduce((sum, product) => sum + product.quantity, 0);
                
                // 状态样式
                const statusClass = `status-${order.status}`;
                const statusText = {
                    'draft': '草稿',
                    'pending': '待审核',
                    'approved': '已审核',
                    'shipped': '已发货',
                    'received': '已收货',
                    'cancelled': '已取消'
                }[order.status];
                
                // 优先级样式
                const priorityClass = `priority-${order.priority}`;
                const priorityText = {
                    'high': '高',
                    'medium': '中',
                    'low': '低'
                }[order.priority];

                row.innerHTML = `
                    <td class="px-6 py-4">
                        <div class="flex items-center">
                            <input type="checkbox" class="rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-3">
                            <div>
                                <div class="text-sm font-medium text-gray-900">${order.id}</div>
                                <div class="text-sm text-gray-500">预期交付：${order.expectedDate}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">${order.supplier}</div>
                        <div class="text-sm text-gray-500">${order.address}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">${totalProducts} 件</div>
                        <div class="text-sm text-gray-500">${order.products.length} 种商品</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium text-gray-900">¥${order.totalAmount.toLocaleString()}</div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="status-badge ${priorityClass}">${priorityText}优先级</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="status-badge ${statusClass}">${statusText}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm text-gray-900">${order.createTime}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center space-x-2">
                            <button class="text-blue-600 hover:text-blue-800 text-sm" onclick="viewOrderDetail('${order.id}')">
                                <i class="fas fa-eye mr-1"></i>查看
                            </button>
                            <button class="text-green-600 hover:text-green-800 text-sm" onclick="editOrder('${order.id}')">
                                <i class="fas fa-edit mr-1"></i>编辑
                            </button>
                            <button class="text-red-600 hover:text-red-800 text-sm" onclick="deleteOrder('${order.id}')">
                                <i class="fas fa-trash mr-1"></i>删除
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // 更新总数显示
        function updateTotalCount() {
            // 这里可以更新页面上的总数显示
            console.log(`当前显示 ${filteredData.length} 条订单`);
        }

        // 查看订单详情
        function viewOrderDetail(orderId) {
            const order = ordersData.find(o => o.id === orderId);
            if (!order) return;

            const content = document.getElementById('orderDetailContent');
            content.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2">
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">订单信息</h4>
                        <div class="bg-gray-50 rounded-lg p-6 mb-6">
                            <div class="grid grid-cols-2 gap-4">
                                <div>
                                    <span class="text-sm text-gray-600">订单号：</span>
                                    <span class="font-medium text-gray-900">${order.id}</span>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-600">供应商：</span>
                                    <span class="font-medium text-gray-900">${order.supplier}</span>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-600">创建时间：</span>
                                    <span class="font-medium text-gray-900">${order.createTime}</span>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-600">预期交付：</span>
                                    <span class="font-medium text-gray-900">${order.expectedDate}</span>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-600">收货地址：</span>
                                    <span class="font-medium text-gray-900">${order.address}</span>
                                </div>
                                <div>
                                    <span class="text-sm text-gray-600">订单总额：</span>
                                    <span class="font-medium text-blue-600">¥${order.totalAmount.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                        
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">商品清单</h4>
                        <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                            <table class="w-full">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">商品名称</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">数量</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">单价</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">小计</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    ${order.products.map(product => `
                                        <tr>
                                            <td class="px-4 py-3 text-sm text-gray-900">${product.name}</td>
                                            <td class="px-4 py-3 text-sm text-gray-900">${product.quantity}</td>
                                            <td class="px-4 py-3 text-sm text-gray-900">¥${product.price.toFixed(2)}</td>
                                            <td class="px-4 py-3 text-sm font-medium text-gray-900">¥${(product.quantity * product.price).toFixed(2)}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">备注说明</h4>
                            <div class="bg-gray-50 rounded-lg p-4">
                                <p class="text-sm text-gray-700">${order.notes}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="text-lg font-semibold text-gray-900 mb-4">订单进度</h4>
                        <div class="order-timeline">
                            ${order.timeline.map(item => `
                                <div class="timeline-item ${item.status}">
                                    <div class="text-sm font-medium text-gray-900">${item.step}</div>
                                    <div class="text-xs text-gray-500">${item.time || '待处理'}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div class="mt-6">
                            <h4 class="text-lg font-semibold text-gray-900 mb-4">订单统计</h4>
                            <div class="space-y-3">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">商品种类：</span>
                                    <span class="font-medium text-gray-900">${order.products.length} 种</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">商品总数：</span>
                                    <span class="font-medium text-gray-900">${order.products.reduce((sum, p) => sum + p.quantity, 0)} 件</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">平均单价：</span>
                                    <span class="font-medium text-gray-900">¥${(order.totalAmount / order.products.reduce((sum, p) => sum + p.quantity, 0)).toFixed(2)}</span>
                                </div>
                                <div class="flex justify-between text-sm border-t border-gray-200 pt-3">
                                    <span class="text-gray-900 font-medium">订单总额：</span>
                                    <span class="font-bold text-blue-600">¥${order.totalAmount.toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('orderDetailModal').classList.remove('hidden');
            document.getElementById('orderDetailModal').classList.add('flex');
        }

        // 编辑订单
        function editOrder(orderId) {
            alert(`编辑订单：${orderId}`);
        }

        // 删除订单
        function deleteOrder(orderId) {
            if (confirm('确定要删除这个订单吗？')) {
                alert(`删除订单：${orderId}`);
            }
        }

        // 搜索功能
        document.getElementById('searchInput').addEventListener('input', function() {
            filterOrders(document.querySelector('.filter-tag.active').getAttribute('data-status'));
        });

        // 筛选器变化
        document.getElementById('supplierFilter').addEventListener('change', function() {
            filterOrders(document.querySelector('.filter-tag.active').getAttribute('data-status'));
        });

        document.getElementById('priorityFilter').addEventListener('change', function() {
            filterOrders(document.querySelector('.filter-tag.active').getAttribute('data-status'));
        });

        document.getElementById('dateFilter').addEventListener('change', function() {
            filterOrders(document.querySelector('.filter-tag.active').getAttribute('data-status'));
        });

        // 全选功能
        document.getElementById('selectAll').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('#ordersTableBody input[type="checkbox"]');
            checkboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
        });

        // 批量操作菜单
        document.getElementById('batchActions').addEventListener('click', function() {
            const menu = document.getElementById('batchMenu');
            menu.classList.toggle('hidden');
        });

        // 新建订单模态框
        document.getElementById('createOrder').addEventListener('click', function() {
            document.getElementById('createOrderModal').classList.remove('hidden');
            document.getElementById('createOrderModal').classList.add('flex');
        });

        document.getElementById('cancelCreateOrder').addEventListener('click', function() {
            document.getElementById('createOrderModal').classList.add('hidden');
            document.getElementById('createOrderModal').classList.remove('flex');
        });

        document.getElementById('saveDraftOrder').addEventListener('click', function() {
            alert('订单已保存为草稿');
            document.getElementById('createOrderModal').classList.add('hidden');
            document.getElementById('createOrderModal').classList.remove('flex');
        });

        document.getElementById('submitOrder').addEventListener('click', function() {
            alert('订单已提交审核');
            document.getElementById('createOrderModal').classList.add('hidden');
            document.getElementById('createOrderModal').classList.remove('flex');
        });

        // 关闭订单详情模态框
        document.getElementById('closeOrderDetail').addEventListener('click', function() {
            document.getElementById('orderDetailModal').classList.add('hidden');
            document.getElementById('orderDetailModal').classList.remove('flex');
        });

        document.getElementById('editOrder').addEventListener('click', function() {
            alert('编辑订单功能');
        });

        // 添加商品
        document.getElementById('addProduct').addEventListener('click', function() {
            const productList = document.getElementById('productList');
            const newProduct = document.createElement('div');
            newProduct.className = 'p-4 flex items-center space-x-4';
            newProduct.innerHTML = `
                <select class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    <option value="">请选择商品</option>
                    <option value="薰衣草精油">薰衣草精油</option>
                    <option value="迷迭香干叶">迷迭香干叶</option>
                    <option value="薄荷叶">薄荷叶</option>
                </select>
                <input type="number" placeholder="数量" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <input type="number" placeholder="单价" class="w-24 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                <span class="w-24 text-sm text-gray-600">¥0.00</span>
                <button type="button" class="p-2 text-red-500 hover:bg-red-50 rounded-lg" onclick="this.parentElement.remove()">
                    <i class="fas fa-trash"></i>
                </button>
            `;
            productList.appendChild(newProduct);
        });

        // 批量导入
        document.getElementById('batchImport').addEventListener('click', function() {
            alert('批量导入功能');
        });

        // 导出订单
        document.getElementById('exportOrders').addEventListener('click', function() {
            alert('导出订单功能');
        });

        // 初始化图表
        function initCharts() {
            const ctx = document.getElementById('purchaseTrendChart').getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
                    datasets: [{
                        label: '采购金额(万元)',
                        data: [120, 135, 148, 162, 175, 186],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: '订单数量',
                        data: [85, 92, 98, 105, 112, 124],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: true,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            grid: {
                                drawOnChartArea: false,
                            },
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        }
                    }
                }
            });
        }

        // 页面初始化
        document.addEventListener('DOMContentLoaded', function() {
            initStatusFilters();
            renderOrdersTable();
            updateTotalCount();
            initCharts();
        });
    </script>
</body>
</html>