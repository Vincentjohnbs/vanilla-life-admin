<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>评论管理 - 香草生活后台管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .sidebar-transition {
            transition: transform 0.3s ease-in-out;
        }
        .stat-card {
            transition: all 0.2s ease;
        }
        .stat-card:hover {
            transform: translateY(-2px);
        }
        .comment-item {
            transition: all 0.2s ease;
        }
        .comment-item:hover {
            background-color: #f9fafb;
        }
        .modal {
            display: none;
        }
        .modal.show {
            display: flex;
        }
        .filter-tag {
            transition: all 0.2s ease;
        }
        .filter-tag.active {
            background-color: #10b981;
            color: white;
        }
        .comment-content {
            max-height: 100px;
            overflow: hidden;
            position: relative;
        }
        .comment-content.expanded {
            max-height: none;
        }
        .expand-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            background: linear-gradient(to right, transparent, white 50%);
            padding-left: 20px;
        }
    </style>

    <style>
        /* 隐藏侧边栏 */
        #sidebar, .sidebar-hidden { display: none !important; }
        /* 调整主内容区域 */
        .lg\:ml-64 { margin-left: 0 !important; }
        /* 隐藏侧边栏切换按钮 */
        #sidebarToggle, #sidebar-toggle { display: none !important; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 侧边栏 -->
    <div id="sidebar" class="fixed inset-y-0 left-0 z-50 w-64 bg-white shadow-lg sidebar-transition">
        <div class="flex items-center justify-center h-16 bg-green-600">
            <h1 class="text-xl font-bold text-white">香草生活管理</h1>
        </div>
        <nav class="mt-8">
            <div class="px-4 space-y-2">
                <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg">
                    <i class="fas fa-tachometer-alt mr-3"></i>
                    仪表盘
                </a>
                <a href="#" class="flex items-center px-4 py-2 bg-green-50 text-green-600 rounded-lg">
                    <i class="fas fa-seedling mr-3"></i>
                    香草阳台
                </a>
                <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg">
                    <i class="fas fa-leaf mr-3"></i>
                    香草图鉴
                </a>
                <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg">
                    <i class="fas fa-shopping-cart mr-3"></i>
                    商品管理
                </a>
                <a href="#" class="flex items-center px-4 py-2 text-gray-700 hover:bg-green-50 hover:text-green-600 rounded-lg">
                    <i class="fas fa-users mr-3"></i>
                    用户管理
                </a>
            </div>
        </nav>
    </div>

    <!-- 主内容区域 -->
    <div class="ml-64">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center">
                    <button id="sidebar-toggle" class="text-gray-500 hover:text-gray-700 mr-4">
                        <i class="fas fa-bars"></i>
                    </button>
                    <nav class="flex items-center space-x-2 text-sm text-gray-600">
                        <a href="#" class="hover:text-green-600">香草阳台</a>
                        <i class="fas fa-chevron-right text-xs"></i>
                        <span class="text-gray-900 font-medium">评论管理</span>
                    </nav>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="export-comments-btn" class="text-blue-600 hover:text-blue-800">
                        <i class="fas fa-download mr-2"></i>导出数据
                    </button>
                    <button id="refresh-btn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">
                        <i class="fas fa-sync-alt mr-2"></i>刷新
                    </button>
                </div>
            </div>
        </header>

        <!-- 统计卡片 -->
        <div class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <div class="stat-card bg-white rounded-lg shadow p-6 cursor-pointer">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-comments text-blue-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">总评论数</p>
                            <p class="text-2xl font-bold text-gray-900">12,456</p>
                            <p class="text-sm text-green-600">+234 今日新增</p>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-lg shadow p-6 cursor-pointer">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-clock text-yellow-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">待审核</p>
                            <p class="text-2xl font-bold text-gray-900">89</p>
                            <p class="text-sm text-red-600">需要处理</p>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-lg shadow p-6 cursor-pointer">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-flag text-red-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">被举报</p>
                            <p class="text-2xl font-bold text-gray-900">23</p>
                            <p class="text-sm text-red-600">待处理举报</p>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card bg-white rounded-lg shadow p-6 cursor-pointer">
                    <div class="flex items-center">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-thumbs-up text-green-600 text-xl"></i>
                            </div>
                        </div>
                        <div class="ml-4">
                            <p class="text-sm font-medium text-gray-600">点赞总数</p>
                            <p class="text-2xl font-bold text-gray-900">45,678</p>
                            <p class="text-sm text-green-600">+1,234 今日</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 筛选和操作栏 -->
            <div class="bg-white rounded-lg shadow mb-6">
                <div class="p-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                        <!-- 筛选标签 -->
                        <div class="flex flex-wrap gap-2">
                            <button class="filter-tag active px-3 py-1 rounded-full text-sm border border-gray-300 hover:bg-green-600 hover:text-white" data-filter="all">
                                全部评论
                            </button>
                            <button class="filter-tag px-3 py-1 rounded-full text-sm border border-gray-300 hover:bg-green-600 hover:text-white" data-filter="pending">
                                待审核
                            </button>
                            <button class="filter-tag px-3 py-1 rounded-full text-sm border border-gray-300 hover:bg-green-600 hover:text-white" data-filter="approved">
                                已通过
                            </button>
                            <button class="filter-tag px-3 py-1 rounded-full text-sm border border-gray-300 hover:bg-green-600 hover:text-white" data-filter="rejected">
                                已拒绝
                            </button>
                            <button class="filter-tag px-3 py-1 rounded-full text-sm border border-gray-300 hover:bg-green-600 hover:text-white" data-filter="reported">
                                被举报
                            </button>
                        </div>
                        
                        <!-- 搜索和操作 -->
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <input type="text" id="search-input" placeholder="搜索评论内容或用户" 
                                       class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 w-64">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-400"></i>
                                </div>
                            </div>
                            
                            <select id="sort-select" class="border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                <option value="newest">最新评论</option>
                                <option value="oldest">最早评论</option>
                                <option value="most-liked">最多点赞</option>
                                <option value="most-reported">最多举报</option>
                            </select>
                            
                            <div class="flex items-center space-x-2">
                                <button id="batch-approve-btn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 disabled:opacity-50" disabled>
                                    <i class="fas fa-check mr-2"></i>批量通过
                                </button>
                                <button id="batch-reject-btn" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 disabled:opacity-50" disabled>
                                    <i class="fas fa-times mr-2"></i>批量拒绝
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 评论列表 -->
            <div class="bg-white rounded-lg shadow">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900">评论列表</h3>
                        <div class="flex items-center space-x-2">
                            <label class="flex items-center">
                                <input type="checkbox" id="select-all" class="mr-2">
                                <span class="text-sm text-gray-700">全选</span>
                            </label>
                            <span class="text-sm text-gray-500">共 <span id="total-count">1,234</span> 条评论</span>
                        </div>
                    </div>
                </div>
                
                <div class="divide-y divide-gray-200">
                    <!-- 评论项 1 -->
                    <div class="comment-item p-6" data-status="pending">
                        <div class="flex items-start space-x-4">
                            <input type="checkbox" class="comment-checkbox mt-1">
                            <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-green-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-medium text-gray-900">花园小助手</h4>
                                        <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">待审核</span>
                                        <span class="text-sm text-gray-500">2024-01-15 14:30</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-green-600 hover:text-green-800" title="通过">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="text-red-600 hover:text-red-800" title="拒绝">
                                            <i class="fas fa-times"></i>
                                        </button>
                                        <button class="text-blue-600 hover:text-blue-800" title="回复">
                                            <i class="fas fa-reply"></i>
                                        </button>
                                        <button class="text-gray-600 hover:text-gray-800" title="更多">
                                            <i class="fas fa-ellipsis-h"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <p class="text-sm text-gray-600 mb-1">评论文章: <a href="#" class="text-blue-600 hover:text-blue-800">薰衣草种植完全指南</a></p>
                                </div>
                                
                                <div class="comment-content bg-gray-50 rounded-lg p-3 mb-3">
                                    <p class="text-gray-800">这篇文章写得非常详细！我按照指南种植的薰衣草现在长得很好，特别是关于土壤配比和浇水频率的建议很实用。不过我想问一下，在北方地区冬季应该如何保护薰衣草过冬呢？</p>
                                    <button class="expand-btn text-blue-600 hover:text-blue-800 text-sm mt-2" style="display: none;">
                                        展开全文
                                    </button>
                                </div>
                                
                                <div class="flex items-center justify-between text-sm text-gray-500">
                                    <div class="flex items-center space-x-4">
                                        <span class="flex items-center">
                                            <i class="fas fa-thumbs-up mr-1"></i>
                                            23 点赞
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-reply mr-1"></i>
                                            5 回复
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-flag mr-1"></i>
                                            0 举报
                                        </span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span>IP: 192.168.1.100</span>
                                        <span>设备: 移动端</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 评论项 2 -->
                    <div class="comment-item p-6" data-status="approved">
                        <div class="flex items-start space-x-4">
                            <input type="checkbox" class="comment-checkbox mt-1">
                            <div class="w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-blue-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-medium text-gray-900">绿植达人</h4>
                                        <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">已通过</span>
                                        <span class="text-sm text-gray-500">2024-01-15 12:15</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-yellow-600 hover:text-yellow-800" title="取消通过">
                                            <i class="fas fa-undo"></i>
                                        </button>
                                        <button class="text-blue-600 hover:text-blue-800" title="回复">
                                            <i class="fas fa-reply"></i>
                                        </button>
                                        <button class="text-gray-600 hover:text-gray-800" title="更多">
                                            <i class="fas fa-ellipsis-h"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <p class="text-sm text-gray-600 mb-1">评论文章: <a href="#" class="text-blue-600 hover:text-blue-800">阳台花园设计技巧</a></p>
                                </div>
                                
                                <div class="comment-content bg-gray-50 rounded-lg p-3 mb-3">
                                    <p class="text-gray-800">太棒了！这些设计技巧很实用，我已经开始改造我的阳台了。</p>
                                </div>
                                
                                <div class="flex items-center justify-between text-sm text-gray-500">
                                    <div class="flex items-center space-x-4">
                                        <span class="flex items-center">
                                            <i class="fas fa-thumbs-up mr-1"></i>
                                            45 点赞
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-reply mr-1"></i>
                                            12 回复
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-flag mr-1"></i>
                                            0 举报
                                        </span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span>IP: 192.168.1.101</span>
                                        <span>设备: 桌面端</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 评论项 3 -->
                    <div class="comment-item p-6" data-status="reported">
                        <div class="flex items-start space-x-4">
                            <input type="checkbox" class="comment-checkbox mt-1">
                            <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center flex-shrink-0">
                                <i class="fas fa-user text-red-600"></i>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-medium text-gray-900">匿名用户</h4>
                                        <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">被举报</span>
                                        <span class="text-sm text-gray-500">2024-01-15 10:45</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <button class="text-orange-600 hover:text-orange-800" title="查看举报">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800" title="通过">
                                            <i class="fas fa-check"></i>
                                        </button>
                                        <button class="text-red-600 hover:text-red-800" title="删除">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                        <button class="text-gray-600 hover:text-gray-800" title="更多">
                                            <i class="fas fa-ellipsis-h"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <p class="text-sm text-gray-600 mb-1">评论文章: <a href="#" class="text-blue-600 hover:text-blue-800">香草护理常见问题</a></p>
                                    <div class="flex items-center space-x-2 mt-1">
                                        <span class="text-xs text-red-600 bg-red-50 px-2 py-1 rounded">举报原因: 垃圾广告</span>
                                        <span class="text-xs text-gray-500">举报次数: 3</span>
                                    </div>
                                </div>
                                
                                <div class="comment-content bg-red-50 rounded-lg p-3 mb-3 border border-red-200">
                                    <p class="text-gray-800">这里有更便宜的产品，联系微信：xxxxx，保证质量...</p>
                                </div>
                                
                                <div class="flex items-center justify-between text-sm text-gray-500">
                                    <div class="flex items-center space-x-4">
                                        <span class="flex items-center">
                                            <i class="fas fa-thumbs-up mr-1"></i>
                                            0 点赞
                                        </span>
                                        <span class="flex items-center">
                                            <i class="fas fa-reply mr-1"></i>
                                            0 回复
                                        </span>
                                        <span class="flex items-center text-red-600">
                                            <i class="fas fa-flag mr-1"></i>
                                            3 举报
                                        </span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span>IP: 192.168.1.102</span>
                                        <span>设备: 移动端</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 分页 -->
                <div class="px-6 py-4 border-t border-gray-200">
                    <div class="flex items-center justify-between">
                        <div class="text-sm text-gray-700">
                            显示 <span class="font-medium">1</span> 到 <span class="font-medium">20</span> 条，共 <span class="font-medium">1,234</span> 条记录
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="px-3 py-2 text-sm text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50" disabled>
                                上一页
                            </button>
                            <button class="px-3 py-2 text-sm text-white bg-green-600 border border-green-600 rounded-md hover:bg-green-700">
                                1
                            </button>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                2
                            </button>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                3
                            </button>
                            <span class="px-3 py-2 text-sm text-gray-500">...</span>
                            <button class="px-3 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                62
                            </button>
                            <button class="px-3 py-2 text-sm text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                                下一页
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 回复评论模态框 -->
    <div id="reply-modal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900">回复评论</h3>
                <button id="close-reply-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="mb-4">
                    <h4 class="font-medium text-gray-900 mb-2">原评论</h4>
                    <div class="bg-gray-50 rounded-lg p-3">
                        <p class="text-gray-800" id="original-comment">这里显示原评论内容...</p>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">管理员回复</label>
                    <textarea id="reply-content" rows="4" placeholder="输入回复内容..." 
                              class="w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-green-500 focus:border-green-500"></textarea>
                </div>
                
                <div class="mt-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="notify-user" class="mr-2">
                        <span class="text-sm text-gray-700">通知用户</span>
                    </label>
                </div>
            </div>
            <div class="flex items-center justify-end space-x-4 p-6 border-t border-gray-200">
                <button id="cancel-reply" class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">
                    取消
                </button>
                <button id="send-reply" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                    发送回复
                </button>
            </div>
        </div>
    </div>

    <!-- 举报详情模态框 -->
    <div id="report-modal" class="modal fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
            <div class="flex items-center justify-between p-6 border-b border-gray-200">
                <h3 class="text-lg font-semibold text-gray-900">举报详情</h3>
                <button id="close-report-modal" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">被举报评论</h4>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <p class="text-gray-800" id="reported-comment">这里显示被举报的评论内容...</p>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">举报记录</h4>
                        <div class="space-y-3" id="report-list">
                            <div class="border border-gray-200 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-gray-900">用户A</span>
                                    <span class="text-sm text-gray-500">2024-01-15 14:30</span>
                                </div>
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">垃圾广告</span>
                                </div>
                                <p class="text-sm text-gray-600">这条评论明显是在推广产品，包含联系方式</p>
                            </div>
                            
                            <div class="border border-gray-200 rounded-lg p-3">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="font-medium text-gray-900">用户B</span>
                                    <span class="text-sm text-gray-500">2024-01-15 15:15</span>
                                </div>
                                <div class="flex items-center space-x-2 mb-2">
                                    <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">垃圾广告</span>
                                </div>
                                <p class="text-sm text-gray-600">同意楼上，这是广告</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="flex items-center justify-end space-x-4 p-6 border-t border-gray-200">
                <button id="ignore-report" class="px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50">
                    忽略举报
                </button>
                <button id="delete-comment" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">
                    删除评论
                </button>
            </div>
        </div>
    </div>

    <script>
        // 侧边栏切换
        document.getElementById('sidebar-toggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // 刷新数据
        document.getElementById('refresh-btn').addEventListener('click', function() {
            console.log('刷新评论数据');
            const btn = this;
            const icon = btn.querySelector('i');
            icon.classList.add('fa-spin');
            setTimeout(() => {
                icon.classList.remove('fa-spin');
                alert('数据已刷新！');
            }, 1500);
        });

        // 导出数据
        document.getElementById('export-comments-btn').addEventListener('click', function() {
            console.log('导出评论数据');
            alert('评论数据导出中，请稍候...');
        });

        // 筛选标签切换
        document.querySelectorAll('.filter-tag').forEach(tag => {
            tag.addEventListener('click', function() {
                // 移除所有active类
                document.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('active'));
                // 添加active类到当前标签
                this.classList.add('active');
                
                const filter = this.dataset.filter;
                console.log('筛选评论:', filter);
                filterComments(filter);
            });
        });

        // 筛选评论函数
        function filterComments(filter) {
            const comments = document.querySelectorAll('.comment-item');
            comments.forEach(comment => {
                const status = comment.dataset.status;
                if (filter === 'all' || status === filter) {
                    comment.style.display = 'block';
                } else {
                    comment.style.display = 'none';
                }
            });
        }

        // 搜索功能
        document.getElementById('search-input').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const comments = document.querySelectorAll('.comment-item');
            
            comments.forEach(comment => {
                const content = comment.textContent.toLowerCase();
                if (content.includes(searchTerm)) {
                    comment.style.display = 'block';
                } else {
                    comment.style.display = 'none';
                }
            });
        });

        // 排序功能
        document.getElementById('sort-select').addEventListener('change', function() {
            const sortBy = this.value;
            console.log('排序方式:', sortBy);
            // 这里可以实现排序逻辑
        });

        // 全选功能
        document.getElementById('select-all').addEventListener('change', function() {
            const checkboxes = document.querySelectorAll('.comment-checkbox');
            checkboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
            updateBatchButtons();
        });

        // 单个复选框变化
        document.querySelectorAll('.comment-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', updateBatchButtons);
        });

        // 更新批量操作按钮状态
        function updateBatchButtons() {
            const checkedBoxes = document.querySelectorAll('.comment-checkbox:checked');
            const batchApproveBtn = document.getElementById('batch-approve-btn');
            const batchRejectBtn = document.getElementById('batch-reject-btn');
            
            if (checkedBoxes.length > 0) {
                batchApproveBtn.disabled = false;
                batchRejectBtn.disabled = false;
            } else {
                batchApproveBtn.disabled = true;
                batchRejectBtn.disabled = true;
            }
        }

        // 批量通过
        document.getElementById('batch-approve-btn').addEventListener('click', function() {
            const checkedBoxes = document.querySelectorAll('.comment-checkbox:checked');
            if (checkedBoxes.length === 0) return;
            
            if (confirm(`确定要批量通过 ${checkedBoxes.length} 条评论吗？`)) {
                console.log('批量通过评论');
                checkedBoxes.forEach(checkbox => {
                    const commentItem = checkbox.closest('.comment-item');
                    const statusSpan = commentItem.querySelector('.px-2.py-1');
                    statusSpan.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full';
                    statusSpan.textContent = '已通过';
                    commentItem.dataset.status = 'approved';
                    checkbox.checked = false;
                });
                updateBatchButtons();
                alert('批量通过成功！');
            }
        });

        // 批量拒绝
        document.getElementById('batch-reject-btn').addEventListener('click', function() {
            const checkedBoxes = document.querySelectorAll('.comment-checkbox:checked');
            if (checkedBoxes.length === 0) return;
            
            if (confirm(`确定要批量拒绝 ${checkedBoxes.length} 条评论吗？`)) {
                console.log('批量拒绝评论');
                checkedBoxes.forEach(checkbox => {
                    const commentItem = checkbox.closest('.comment-item');
                    const statusSpan = commentItem.querySelector('.px-2.py-1');
                    statusSpan.className = 'px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full';
                    statusSpan.textContent = '已拒绝';
                    commentItem.dataset.status = 'rejected';
                    checkbox.checked = false;
                });
                updateBatchButtons();
                alert('批量拒绝成功！');
            }
        });

        // 单个评论操作
        document.addEventListener('click', function(e) {
            const target = e.target;
            const icon = target.closest('i');
            if (!icon) return;

            const commentItem = target.closest('.comment-item');
            if (!commentItem) return;

            if (icon.classList.contains('fa-check')) {
                // 通过评论
                console.log('通过评论');
                const statusSpan = commentItem.querySelector('.px-2.py-1');
                statusSpan.className = 'px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full';
                statusSpan.textContent = '已通过';
                commentItem.dataset.status = 'approved';
            } else if (icon.classList.contains('fa-times')) {
                // 拒绝评论
                if (confirm('确定要拒绝这条评论吗？')) {
                    console.log('拒绝评论');
                    const statusSpan = commentItem.querySelector('.px-2.py-1');
                    statusSpan.className = 'px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full';
                    statusSpan.textContent = '已拒绝';
                    commentItem.dataset.status = 'rejected';
                }
            } else if (icon.classList.contains('fa-reply')) {
                // 回复评论
                const commentContent = commentItem.querySelector('.comment-content p').textContent;
                document.getElementById('original-comment').textContent = commentContent;
                document.getElementById('reply-modal').classList.add('show');
            } else if (icon.classList.contains('fa-exclamation-triangle')) {
                // 查看举报
                const commentContent = commentItem.querySelector('.comment-content p').textContent;
                document.getElementById('reported-comment').textContent = commentContent;
                document.getElementById('report-modal').classList.add('show');
            } else if (icon.classList.contains('fa-trash')) {
                // 删除评论
                if (confirm('确定要删除这条评论吗？此操作不可恢复！')) {
                    console.log('删除评论');
                    commentItem.remove();
                }
            } else if (icon.classList.contains('fa-undo')) {
                // 取消通过
                if (confirm('确定要取消通过这条评论吗？')) {
                    console.log('取消通过评论');
                    const statusSpan = commentItem.querySelector('.px-2.py-1');
                    statusSpan.className = 'px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full';
                    statusSpan.textContent = '待审核';
                    commentItem.dataset.status = 'pending';
                }
            }
        });

        // 回复模态框
        document.getElementById('close-reply-modal').addEventListener('click', function() {
            document.getElementById('reply-modal').classList.remove('show');
        });

        document.getElementById('cancel-reply').addEventListener('click', function() {
            document.getElementById('reply-modal').classList.remove('show');
        });

        document.getElementById('send-reply').addEventListener('click', function() {
            const replyContent = document.getElementById('reply-content').value;
            const notifyUser = document.getElementById('notify-user').checked;
            
            if (!replyContent.trim()) {
                alert('请输入回复内容');
                return;
            }
            
            console.log('发送回复:', replyContent, '通知用户:', notifyUser);
            alert('回复已发送！');
            document.getElementById('reply-modal').classList.remove('show');
            document.getElementById('reply-content').value = '';
            document.getElementById('notify-user').checked = false;
        });

        // 举报模态框
        document.getElementById('close-report-modal').addEventListener('click', function() {
            document.getElementById('report-modal').classList.remove('show');
        });

        document.getElementById('ignore-report').addEventListener('click', function() {
            console.log('忽略举报');
            alert('已忽略举报！');
            document.getElementById('report-modal').classList.remove('show');
        });

        document.getElementById('delete-comment').addEventListener('click', function() {
            if (confirm('确定要删除这条被举报的评论吗？此操作不可恢复！')) {
                console.log('删除被举报评论');
                alert('评论已删除！');
                document.getElementById('report-modal').classList.remove('show');
            }
        });

        // 展开/收起评论内容
        document.querySelectorAll('.comment-content').forEach(content => {
            const text = content.querySelector('p');
            const expandBtn = content.querySelector('.expand-btn');
            
            if (text.scrollHeight > content.clientHeight) {
                expandBtn.style.display = 'block';
                
                expandBtn.addEventListener('click', function() {
                    if (content.classList.contains('expanded')) {
                        content.classList.remove('expanded');
                        this.textContent = '展开全文';
                    } else {
                        content.classList.add('expanded');
                        this.textContent = '收起';
                    }
                });
            }
        });

        // 统计卡片点击
        document.querySelectorAll('.stat-card').forEach(card => {
            card.addEventListener('click', function() {
                const title = this.querySelector('p').textContent;
                console.log('查看统计详情:', title);
                // 这里可以跳转到详细统计页面或筛选对应状态的评论
            });
        });

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('评论管理页面初始化完成');
            updateBatchButtons();
        });
    </script>
</body>
</html>