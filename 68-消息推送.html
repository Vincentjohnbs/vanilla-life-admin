<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¶ˆæ¯æ¨é€ - é¦™è‰ç”Ÿæ´»åå°ç®¡ç†ç³»ç»Ÿ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .message-item {
            transition: all 0.3s ease;
        }
        .message-item:hover {
            background-color: #f9fafb;
        }
        .status-badge {
            transition: all 0.3s ease;
        }
        .template-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .template-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .progress-ring {
            transition: stroke-dasharray 0.3s ease;
        }
        .emoji-picker {
            max-height: 200px;
            overflow-y: auto;
        }
    </style>

    <style>
        /* éšè—ä¾§è¾¹æ  */
        #sidebar, .sidebar-hidden { display: none !important; }
        /* è°ƒæ•´ä¸»å†…å®¹åŒºåŸŸ */
        .lg\:ml-64 { margin-left: 0 !important; }
        /* éšè—ä¾§è¾¹æ åˆ‡æ¢æŒ‰é’® */
        #sidebarToggle, #sidebar-toggle { display: none !important; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- ä¾§è¾¹æ  -->
    <div id="sidebar" class="fixed left-0 top-0 w-64 h-full bg-white shadow-lg transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out z-30">
        <div class="p-6 border-b border-gray-200">
            <h1 class="text-xl font-bold text-gray-800">é¦™è‰ç”Ÿæ´»</h1>
            <p class="text-sm text-gray-600 mt-1">åå°ç®¡ç†ç³»ç»Ÿ</p>
        </div>
        
        <nav class="mt-6">
            <div class="px-4">
                <h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-3">ç”¨æˆ·ç®¡ç†</h3>
                <ul class="space-y-1">
                    <li><a href="61-ç”¨æˆ·è¯¦æƒ…é¡µ.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-user mr-3"></i>ç”¨æˆ·è¯¦æƒ…</a></li>
                    <li><a href="62-ä¼šå‘˜ç®¡ç†é¡µ.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-crown mr-3"></i>ä¼šå‘˜ç®¡ç†</a></li>
                    <li><a href="63-ç”¨æˆ·æ ‡ç­¾ç®¡ç†.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-tags mr-3"></i>ç”¨æˆ·æ ‡ç­¾</a></li>
                    <li><a href="64-ç§¯åˆ†ç®¡ç†.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-coins mr-3"></i>ç§¯åˆ†ç®¡ç†</a></li>
                    <li><a href="65-æƒé™é…ç½®.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-shield-alt mr-3"></i>æƒé™é…ç½®</a></li>
                    <li><a href="66-ç”¨æˆ·åˆ†ç¾¤.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-users mr-3"></i>ç”¨æˆ·åˆ†ç¾¤</a></li>
                    <li><a href="67-è¡Œä¸ºåˆ†æ.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-chart-line mr-3"></i>è¡Œä¸ºåˆ†æ</a></li>
                    <li><a href="68-æ¶ˆæ¯æ¨é€.html" class="flex items-center px-3 py-2 text-white bg-green-600 rounded-lg"><i class="fas fa-bell mr-3"></i>æ¶ˆæ¯æ¨é€</a></li>
                    <li><a href="69-é»‘åå•ç®¡ç†.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-ban mr-3"></i>é»‘åå•ç®¡ç†</a></li>
                    <li><a href="70-ç”¨æˆ·å¯¼å‡º.html" class="flex items-center px-3 py-2 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors"><i class="fas fa-download mr-3"></i>ç”¨æˆ·å¯¼å‡º</a></li>
                </ul>
            </div>
        </nav>
    </div>

    <!-- ä¸»å†…å®¹åŒºåŸŸ -->
    <div class="lg:ml-64">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center">
                    <button id="sidebarToggle" class="lg:hidden p-2 rounded-md text-gray-600 hover:bg-gray-100">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="ml-4">
                        <h2 class="text-xl font-semibold text-gray-800">æ¶ˆæ¯æ¨é€ç®¡ç†</h2>
                        <p class="text-sm text-gray-600">ç²¾å‡†æ¨é€ï¼Œæå‡ç”¨æˆ·æ´»è·ƒåº¦å’Œè½¬åŒ–ç‡</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="createMessage" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                        <i class="fas fa-plus mr-2"></i>åˆ›å»ºæ¨é€
                    </button>
                    <button id="messageTemplates" class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                        <i class="fas fa-file-alt mr-2"></i>æ¶ˆæ¯æ¨¡æ¿
                    </button>
                    <button id="pushSettings" class="px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">
                        <i class="fas fa-cog mr-2"></i>æ¨é€è®¾ç½®
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://via.placeholder.com/32" alt="ç”¨æˆ·å¤´åƒ" class="w-8 h-8 rounded-full">
                        <span class="text-sm font-medium text-gray-700">ç®¡ç†å‘˜</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- é¡µé¢å†…å®¹ -->
        <main class="p-6">
            <!-- æ¨é€ç»Ÿè®¡å¡ç‰‡ -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">ä»Šæ—¥æ¨é€</p>
                            <p class="text-2xl font-bold text-gray-900 mt-1">12,345</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+23.5%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-paper-plane text-blue-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">é€è¾¾ç‡</p>
                            <p class="text-2xl font-bold text-gray-900 mt-1">94.2%</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+1.8%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-check-circle text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">ç‚¹å‡»ç‡</p>
                            <p class="text-2xl font-bold text-gray-900 mt-1">8.7%</p>
                            <p class="text-sm text-red-600 mt-1">
                                <i class="fas fa-arrow-down mr-1"></i>-0.5%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-mouse-pointer text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm border border-gray-100 p-6 card-hover">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">è½¬åŒ–ç‡</p>
                            <p class="text-2xl font-bold text-gray-900 mt-1">3.2%</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+0.3%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
                <!-- æ¨é€æ•ˆæœè¶‹åŠ¿ -->
                <div class="lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-gray-900">æ¨é€æ•ˆæœè¶‹åŠ¿</h3>
                            <div class="flex items-center space-x-2">
                                <button class="px-3 py-1 text-sm bg-green-500 text-white rounded" id="trendSent">å‘é€é‡</button>
                                <button class="px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded" id="trendClick">ç‚¹å‡»ç‡</button>
                                <button class="px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded" id="trendConversion">è½¬åŒ–ç‡</button>
                            </div>
                        </div>
                    </div>
                    <div class="p-6">
                        <canvas id="pushTrendChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <!-- æ¨é€æ¸ é“åˆ†å¸ƒ -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                    <div class="p-6 border-b border-gray-200">
                        <h3 class="text-lg font-semibold text-gray-900">æ¨é€æ¸ é“åˆ†å¸ƒ</h3>
                    </div>
                    <div class="p-6">
                        <canvas id="channelChart" width="300" height="300"></canvas>
                    </div>
                </div>
            </div>

            <!-- æ¶ˆæ¯åˆ—è¡¨ -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-100">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-semibold text-gray-900">æ¨é€è®°å½•</h3>
                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <input type="text" id="searchMessages" placeholder="æœç´¢æ¶ˆæ¯..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            </div>
                            <select id="statusFilter" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                <option value="">å…¨éƒ¨çŠ¶æ€</option>
                                <option value="draft">è‰ç¨¿</option>
                                <option value="scheduled">å·²å®‰æ’</option>
                                <option value="sending">å‘é€ä¸­</option>
                                <option value="sent">å·²å‘é€</option>
                                <option value="failed">å‘é€å¤±è´¥</option>
                            </select>
                            <select id="channelFilter" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                <option value="">å…¨éƒ¨æ¸ é“</option>
                                <option value="push">APPæ¨é€</option>
                                <option value="sms">çŸ­ä¿¡</option>
                                <option value="email">é‚®ä»¶</option>
                                <option value="wechat">å¾®ä¿¡</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                                    <input type="checkbox" id="selectAll" class="rounded border-gray-300 text-green-600 focus:ring-green-500">
                                </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ¶ˆæ¯å†…å®¹</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ¨é€æ¸ é“</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ç›®æ ‡ç”¨æˆ·</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">å‘é€æ—¶é—´</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">çŠ¶æ€</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ•ˆæœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody id="messagesList" class="bg-white divide-y divide-gray-200">
                            <!-- æ¶ˆæ¯åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </tbody>
                    </table>
                </div>
                
                <div class="px-6 py-4 border-t border-gray-200">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <select id="batchAction" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                                <option value="">æ‰¹é‡æ“ä½œ</option>
                                <option value="delete">åˆ é™¤</option>
                                <option value="duplicate">å¤åˆ¶</option>
                                <option value="export">å¯¼å‡º</option>
                            </select>
                            <button id="executeBatch" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">æ‰§è¡Œ</button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-700">å…± 156 æ¡è®°å½•</span>
                            <div class="flex items-center space-x-1">
                                <button class="px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="px-3 py-2 text-white bg-green-500 border border-green-500">1</button>
                                <button class="px-3 py-2 text-gray-500 bg-white border border-gray-300 hover:bg-gray-50">2</button>
                                <button class="px-3 py-2 text-gray-500 bg-white border border-gray-300 hover:bg-gray-50">3</button>
                                <button class="px-3 py-2 text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-50">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- åˆ›å»ºæ¨é€æ¨¡æ€æ¡† -->
    <div id="createMessageModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-gray-900">åˆ›å»ºæ¨é€æ¶ˆæ¯</h3>
                    <button id="closeCreateModal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="p-6">
                <form id="messageForm" class="space-y-6">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æ¶ˆæ¯æ ‡é¢˜</label>
                            <input type="text" id="messageTitle" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="è¯·è¾“å…¥æ¶ˆæ¯æ ‡é¢˜" required>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">æ¨é€æ¸ é“</label>
                            <select id="messageChannel" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
                                <option value="">è¯·é€‰æ‹©æ¨é€æ¸ é“</option>
                                <option value="push">APPæ¨é€</option>
                                <option value="sms">çŸ­ä¿¡</option>
                                <option value="email">é‚®ä»¶</option>
                                <option value="wechat">å¾®ä¿¡</option>
                                <option value="all">å…¨æ¸ é“</option>
                            </select>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ¶ˆæ¯å†…å®¹</label>
                        <div class="relative">
                            <textarea id="messageContent" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="è¯·è¾“å…¥æ¶ˆæ¯å†…å®¹" required></textarea>
                            <div class="absolute bottom-2 right-2 flex items-center space-x-2">
                                <button type="button" id="addEmoji" class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-smile"></i>
                                </button>
                                <span class="text-xs text-gray-500" id="contentLength">0/200</span>
                            </div>
                        </div>
                        <div id="emojiPicker" class="hidden mt-2 p-3 border border-gray-300 rounded-lg bg-white emoji-picker">
                            <div class="grid grid-cols-8 gap-2">
                                <!-- è¡¨æƒ…ç¬¦å·å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">ç›®æ ‡ç”¨æˆ·</label>
                            <select id="targetUsers" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
                                <option value="">è¯·é€‰æ‹©ç›®æ ‡ç”¨æˆ·</option>
                                <option value="all">å…¨éƒ¨ç”¨æˆ·</option>
                                <option value="active">æ´»è·ƒç”¨æˆ·</option>
                                <option value="inactive">éæ´»è·ƒç”¨æˆ·</option>
                                <option value="vip">VIPç”¨æˆ·</option>
                                <option value="new">æ–°ç”¨æˆ·</option>
                                <option value="custom">è‡ªå®šä¹‰åˆ†ç¾¤</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">å‘é€æ—¶é—´</label>
                            <select id="sendTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" required>
                                <option value="now">ç«‹å³å‘é€</option>
                                <option value="scheduled">å®šæ—¶å‘é€</option>
                            </select>
                        </div>
                    </div>
                    
                    <div id="scheduledTimeContainer" class="hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2">å®šæ—¶å‘é€æ—¶é—´</label>
                        <input type="datetime-local" id="scheduledTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500">
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">è·³è½¬é“¾æ¥ï¼ˆå¯é€‰ï¼‰</label>
                        <input type="url" id="messageLink" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="https://example.com">
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <label class="flex items-center">
                            <input type="checkbox" id="enableTracking" class="rounded border-gray-300 text-green-600 focus:ring-green-500" checked>
                            <span class="ml-2 text-sm text-gray-700">å¯ç”¨æ•ˆæœè¿½è¸ª</span>
                        </label>
                        
                        <label class="flex items-center">
                            <input type="checkbox" id="enableABTest" class="rounded border-gray-300 text-green-600 focus:ring-green-500">
                            <span class="ml-2 text-sm text-gray-700">å¯ç”¨A/Bæµ‹è¯•</span>
                        </label>
                    </div>
                </form>
            </div>
            <div class="p-6 border-t border-gray-200 flex justify-end space-x-3">
                <button id="saveDraft" class="px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors">ä¿å­˜è‰ç¨¿</button>
                <button id="previewMessage" class="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">é¢„è§ˆ</button>
                <button id="sendMessage" class="px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">å‘é€</button>
            </div>
        </div>
    </div>

    <!-- æ¶ˆæ¯æ¨¡æ¿æ¨¡æ€æ¡† -->
    <div id="templatesModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-6xl mx-4 max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-gray-900">æ¶ˆæ¯æ¨¡æ¿åº“</h3>
                    <div class="flex items-center space-x-3">
                        <button id="createTemplate" class="px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                            <i class="fas fa-plus mr-2"></i>æ–°å»ºæ¨¡æ¿
                        </button>
                        <button id="closeTemplatesModal" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="templatesList">
                    <!-- æ¨¡æ¿åˆ—è¡¨å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        const pushData = {
            trend: {
                sent: [8500, 9200, 8800, 10500, 9800, 11200, 10800],
                click: [8.5, 9.2, 8.1, 10.5, 9.3, 11.2, 8.7],
                conversion: [2.8, 3.1, 2.5, 3.5, 3.0, 3.8, 3.2]
            },
            channels: {
                labels: ['APPæ¨é€', 'çŸ­ä¿¡', 'é‚®ä»¶', 'å¾®ä¿¡'],
                data: [45, 25, 20, 10]
            },
            messages: [
                {
                    id: 1,
                    title: 'æ–°å“ä¸Šæ¶é€šçŸ¥',
                    content: 'ğŸŒ¿ é¦™è‰æ–°å“éœ‡æ’¼ä¸Šå¸‚ï¼é™æ—¶ä¼˜æƒ ï¼Œç«‹å³æŸ¥çœ‹',
                    channel: 'push',
                    target: 'å…¨éƒ¨ç”¨æˆ·',
                    sendTime: '2024-01-15 10:00',
                    status: 'sent',
                    sent: 12500,
                    clicked: 1087,
                    converted: 234
                },
                {
                    id: 2,
                    title: 'ä¼šå‘˜ä¸“äº«ä¼˜æƒ ',
                    content: 'VIPä¼šå‘˜ä¸“äº«8æŠ˜ä¼˜æƒ ï¼Œä»…é™ä»Šæ—¥ï¼',
                    channel: 'sms',
                    target: 'VIPç”¨æˆ·',
                    sendTime: '2024-01-15 09:30',
                    status: 'sent',
                    sent: 3456,
                    clicked: 456,
                    converted: 89
                },
                {
                    id: 3,
                    title: 'ç§æ¤æŠ€å·§åˆ†äº«',
                    content: 'æŒæ¡è¿™äº›æŠ€å·§ï¼Œè®©ä½ çš„é¦™è‰é•¿å¾—æ›´èŒ‚ç››',
                    channel: 'email',
                    target: 'æ´»è·ƒç”¨æˆ·',
                    sendTime: '2024-01-15 08:00',
                    status: 'sent',
                    sent: 8765,
                    clicked: 765,
                    converted: 123
                },
                {
                    id: 4,
                    title: 'ç­¾åˆ°æé†’',
                    content: 'åˆ«å¿˜äº†æ¯æ—¥ç­¾åˆ°ï¼Œç§¯åˆ†å¥–åŠ±ç­‰ä½ æ¥æ‹¿ï¼',
                    channel: 'push',
                    target: 'éæ´»è·ƒç”¨æˆ·',
                    sendTime: '2024-01-16 20:00',
                    status: 'scheduled',
                    sent: 0,
                    clicked: 0,
                    converted: 0
                },
                {
                    id: 5,
                    title: 'è´­ç‰©è½¦æé†’',
                    content: 'æ‚¨çš„è´­ç‰©è½¦è¿˜æœ‰å•†å“æœªç»“ç®—ï¼Œå¿«æ¥å®Œæˆè´­ä¹°å§',
                    channel: 'push',
                    target: 'è‡ªå®šä¹‰åˆ†ç¾¤',
                    sendTime: '2024-01-15 15:30',
                    status: 'sending',
                    sent: 2340,
                    clicked: 187,
                    converted: 23
                }
            ],
            templates: [
                {
                    id: 1,
                    name: 'æ–°å“æ¨å¹¿æ¨¡æ¿',
                    category: 'è¥é”€æ¨å¹¿',
                    title: 'ğŸŒ¿ æ–°å“ä¸Šæ¶é€šçŸ¥',
                    content: 'äº²çˆ±çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬çš„æ–°å“{product_name}å·²ç»ä¸Šæ¶ï¼Œç°åœ¨è´­ä¹°äº«å—{discount}æŠ˜ä¼˜æƒ ï¼',
                    channel: 'push',
                    usage: 156
                },
                {
                    id: 2,
                    name: 'ä¼šå‘˜å…³æ€€æ¨¡æ¿',
                    category: 'ç”¨æˆ·å…³æ€€',
                    title: 'æ„Ÿè°¢æ‚¨çš„æ”¯æŒ',
                    content: 'äº²çˆ±çš„{user_name}ï¼Œæ„Ÿè°¢æ‚¨æˆä¸ºæˆ‘ä»¬çš„VIPä¼šå‘˜ï¼Œä¸“å±ä¼˜æƒ ç­‰æ‚¨æ¥äº«å—ï¼',
                    channel: 'email',
                    usage: 89
                },
                {
                    id: 3,
                    name: 'æ´»åŠ¨é‚€è¯·æ¨¡æ¿',
                    category: 'æ´»åŠ¨é‚€è¯·',
                    title: 'ç²¾å½©æ´»åŠ¨é‚€è¯·',
                    content: 'ğŸ‰ {activity_name}å³å°†å¼€å§‹ï¼Œè¯šé‚€æ‚¨çš„å‚ä¸ï¼æ´»åŠ¨æ—¶é—´ï¼š{start_time}',
                    channel: 'sms',
                    usage: 234
                },
                {
                    id: 4,
                    name: 'è®¢å•çŠ¶æ€æ¨¡æ¿',
                    category: 'è®¢å•é€šçŸ¥',
                    title: 'è®¢å•çŠ¶æ€æ›´æ–°',
                    content: 'æ‚¨çš„è®¢å•{order_no}çŠ¶æ€å·²æ›´æ–°ä¸º{status}ï¼Œè¯·åŠæ—¶æŸ¥çœ‹ã€‚',
                    channel: 'push',
                    usage: 567
                },
                {
                    id: 5,
                    name: 'ç”Ÿæ—¥ç¥ç¦æ¨¡æ¿',
                    category: 'ç”¨æˆ·å…³æ€€',
                    title: 'ç”Ÿæ—¥å¿«ä¹',
                    content: 'ğŸ‚ äº²çˆ±çš„{user_name}ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ç‰¹ä¸ºæ‚¨å‡†å¤‡äº†ç”Ÿæ—¥ç¤¼å“ï¼Œå¿«æ¥é¢†å–å§ï¼',
                    channel: 'all',
                    usage: 78
                },
                {
                    id: 6,
                    name: 'ç­¾åˆ°æé†’æ¨¡æ¿',
                    category: 'ç”¨æˆ·æ¿€æ´»',
                    title: 'æ¯æ—¥ç­¾åˆ°æé†’',
                    content: 'â° åˆ«å¿˜äº†ä»Šæ—¥ç­¾åˆ°å“¦ï¼Œè¿ç»­ç­¾åˆ°{days}å¤©å¯è·å¾—é¢å¤–å¥–åŠ±ï¼',
                    channel: 'push',
                    usage: 345
                }
            ]
        };

        const emojis = ['ğŸ˜€', 'ğŸ˜ƒ', 'ğŸ˜„', 'ğŸ˜', 'ğŸ˜†', 'ğŸ˜…', 'ğŸ˜‚', 'ğŸ¤£', 'ğŸ˜Š', 'ğŸ˜‡', 'ğŸ™‚', 'ğŸ™ƒ', 'ğŸ˜‰', 'ğŸ˜Œ', 'ğŸ˜', 'ğŸ¥°', 'ğŸ˜˜', 'ğŸ˜—', 'ğŸ˜™', 'ğŸ˜š', 'ğŸ˜‹', 'ğŸ˜›', 'ğŸ˜', 'ğŸ˜œ', 'ğŸ¤ª', 'ğŸ¤¨', 'ğŸ§', 'ğŸ¤“', 'ğŸ˜', 'ğŸ¤©', 'ğŸ¥³', 'ğŸ˜', 'ğŸ˜’', 'ğŸ˜', 'ğŸ˜”', 'ğŸ˜Ÿ', 'ğŸ˜•', 'ğŸ™', 'â˜¹ï¸', 'ğŸ˜£', 'ğŸ˜–', 'ğŸ˜«', 'ğŸ˜©', 'ğŸ¥º', 'ğŸ˜¢', 'ğŸ˜­', 'ğŸ˜¤', 'ğŸ˜ ', 'ğŸ˜¡', 'ğŸ¤¬', 'ğŸ¤¯', 'ğŸ˜³', 'ğŸ¥µ', 'ğŸ¥¶', 'ğŸ˜±', 'ğŸ˜¨', 'ğŸ˜°', 'ğŸ˜¥', 'ğŸ˜“', 'ğŸ¤—', 'ğŸ¤”', 'ğŸ¤­', 'ğŸ¤«', 'ğŸ¤¥', 'ğŸ˜¶', 'ğŸ˜', 'ğŸ˜‘', 'ğŸ˜¬', 'ğŸ™„', 'ğŸ˜¯', 'ğŸ˜¦', 'ğŸ˜§', 'ğŸ˜®', 'ğŸ˜²', 'ğŸ¥±', 'ğŸ˜´', 'ğŸ¤¤', 'ğŸ˜ª', 'ğŸ˜µ', 'ğŸ¤', 'ğŸ¥´', 'ğŸ¤¢', 'ğŸ¤®', 'ğŸ¤§', 'ğŸ˜·', 'ğŸ¤’', 'ğŸ¤•'];

        let currentChart = null;
        let channelChart = null;

        // ä¾§è¾¹æ åˆ‡æ¢
        document.getElementById('sidebarToggle').addEventListener('click', function() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('-translate-x-full');
        });

        // åˆå§‹åŒ–æ¨é€è¶‹åŠ¿å›¾è¡¨
        function initPushTrendChart(type = 'sent') {
            const ctx = document.getElementById('pushTrendChart').getContext('2d');
            
            if (currentChart) {
                currentChart.destroy();
            }
            
            const labels = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥'];
            let data, label, color;
            
            switch(type) {
                case 'sent':
                    data = pushData.trend.sent;
                    label = 'å‘é€é‡';
                    color = 'rgb(34, 197, 94)';
                    break;
                case 'click':
                    data = pushData.trend.click;
                    label = 'ç‚¹å‡»ç‡(%)';
                    color = 'rgb(59, 130, 246)';
                    break;
                case 'conversion':
                    data = pushData.trend.conversion;
                    label = 'è½¬åŒ–ç‡(%)';
                    color = 'rgb(168, 85, 247)';
                    break;
            }
            
            currentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: label,
                        data: data,
                        borderColor: color,
                        backgroundColor: color.replace('rgb', 'rgba').replace(')', ', 0.1)'),
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // åˆå§‹åŒ–æ¸ é“åˆ†å¸ƒå›¾è¡¨
        function initChannelChart() {
            const ctx = document.getElementById('channelChart').getContext('2d');
            
            channelChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: pushData.channels.labels,
                    datasets: [{
                        data: pushData.channels.data,
                        backgroundColor: [
                            'rgb(34, 197, 94)',
                            'rgb(59, 130, 246)',
                            'rgb(168, 85, 247)',
                            'rgb(245, 158, 11)'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // æ¸²æŸ“æ¶ˆæ¯åˆ—è¡¨
        function renderMessagesList() {
            const tbody = document.getElementById('messagesList');
            tbody.innerHTML = '';
            
            pushData.messages.forEach(message => {
                const row = document.createElement('tr');
                row.className = 'message-item hover:bg-gray-50';
                
                let statusBadge, statusColor;
                switch(message.status) {
                    case 'sent':
                        statusBadge = 'å·²å‘é€';
                        statusColor = 'bg-green-100 text-green-800';
                        break;
                    case 'sending':
                        statusBadge = 'å‘é€ä¸­';
                        statusColor = 'bg-blue-100 text-blue-800';
                        break;
                    case 'scheduled':
                        statusBadge = 'å·²å®‰æ’';
                        statusColor = 'bg-yellow-100 text-yellow-800';
                        break;
                    case 'draft':
                        statusBadge = 'è‰ç¨¿';
                        statusColor = 'bg-gray-100 text-gray-800';
                        break;
                    case 'failed':
                        statusBadge = 'å‘é€å¤±è´¥';
                        statusColor = 'bg-red-100 text-red-800';
                        break;
                }
                
                let channelIcon, channelName;
                switch(message.channel) {
                    case 'push':
                        channelIcon = 'fa-mobile-alt';
                        channelName = 'APPæ¨é€';
                        break;
                    case 'sms':
                        channelIcon = 'fa-sms';
                        channelName = 'çŸ­ä¿¡';
                        break;
                    case 'email':
                        channelIcon = 'fa-envelope';
                        channelName = 'é‚®ä»¶';
                        break;
                    case 'wechat':
                        channelIcon = 'fa-weixin';
                        channelName = 'å¾®ä¿¡';
                        break;
                }
                
                const clickRate = message.sent > 0 ? ((message.clicked / message.sent) * 100).toFixed(1) : '0.0';
                const conversionRate = message.clicked > 0 ? ((message.converted / message.clicked) * 100).toFixed(1) : '0.0';
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <input type="checkbox" class="rounded border-gray-300 text-green-600 focus:ring-green-500">
                    </td>
                    <td class="px-6 py-4">
                        <div class="max-w-xs">
                            <div class="text-sm font-medium text-gray-900 truncate">${message.title}</div>
                            <div class="text-sm text-gray-500 truncate">${message.content}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <i class="fas ${channelIcon} text-gray-400 mr-2"></i>
                            <span class="text-sm text-gray-900">${channelName}</span>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="text-sm text-gray-900">${message.target}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="text-sm text-gray-900">${message.sendTime}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full ${statusColor}">
                            ${statusBadge}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="text-sm text-gray-900">
                            <div>å‘é€: ${message.sent.toLocaleString()}</div>
                            <div>ç‚¹å‡»: ${clickRate}%</div>
                            <div>è½¬åŒ–: ${conversionRate}%</div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <div class="flex items-center space-x-2">
                            <button class="text-blue-600 hover:text-blue-900" onclick="viewMessage(${message.id})">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="text-green-600 hover:text-green-900" onclick="editMessage(${message.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-purple-600 hover:text-purple-900" onclick="duplicateMessage(${message.id})">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-900" onclick="deleteMessage(${message.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        // æ¸²æŸ“æ¨¡æ¿åˆ—è¡¨
        function renderTemplatesList() {
            const container = document.getElementById('templatesList');
            container.innerHTML = '';
            
            pushData.templates.forEach(template => {
                const templateCard = document.createElement('div');
                templateCard.className = 'template-card bg-white border border-gray-200 rounded-lg p-4';
                
                let channelIcon, channelName;
                switch(template.channel) {
                    case 'push':
                        channelIcon = 'fa-mobile-alt';
                        channelName = 'APPæ¨é€';
                        break;
                    case 'sms':
                        channelIcon = 'fa-sms';
                        channelName = 'çŸ­ä¿¡';
                        break;
                    case 'email':
                        channelIcon = 'fa-envelope';
                        channelName = 'é‚®ä»¶';
                        break;
                    case 'wechat':
                        channelIcon = 'fa-weixin';
                        channelName = 'å¾®ä¿¡';
                        break;
                    case 'all':
                        channelIcon = 'fa-broadcast-tower';
                        channelName = 'å…¨æ¸ é“';
                        break;
                }
                
                templateCard.innerHTML = `
                    <div class="flex items-start justify-between mb-3">
                        <div class="flex-1">
                            <h4 class="text-lg font-medium text-gray-900 mb-1">${template.name}</h4>
                            <span class="inline-flex px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded">${template.category}</span>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="text-blue-600 hover:text-blue-800" onclick="useTemplate(${template.id})">
                                <i class="fas fa-play"></i>
                            </button>
                            <button class="text-green-600 hover:text-green-800" onclick="editTemplate(${template.id})">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-600 hover:text-red-800" onclick="deleteTemplate(${template.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <div class="text-sm font-medium text-gray-700 mb-1">${template.title}</div>
                        <div class="text-sm text-gray-600 line-clamp-2">${template.content}</div>
                    </div>
                    
                    <div class="flex items-center justify-between text-sm text-gray-500">
                        <div class="flex items-center">
                            <i class="fas ${channelIcon} mr-1"></i>
                            <span>${channelName}</span>
                        </div>
                        <span>ä½¿ç”¨ ${template.usage} æ¬¡</span>
                    </div>
                `;
                
                templateCard.addEventListener('click', function() {
                    useTemplate(template.id);
                });
                
                container.appendChild(templateCard);
            });
        }

        // ç”Ÿæˆè¡¨æƒ…é€‰æ‹©å™¨
        function generateEmojiPicker() {
            const container = document.getElementById('emojiPicker').querySelector('.grid');
            container.innerHTML = '';
            
            emojis.forEach(emoji => {
                const emojiBtn = document.createElement('button');
                emojiBtn.type = 'button';
                emojiBtn.className = 'p-2 hover:bg-gray-100 rounded text-lg';
                emojiBtn.textContent = emoji;
                emojiBtn.addEventListener('click', function() {
                    const textarea = document.getElementById('messageContent');
                    const cursorPos = textarea.selectionStart;
                    const textBefore = textarea.value.substring(0, cursorPos);
                    const textAfter = textarea.value.substring(cursorPos);
                    textarea.value = textBefore + emoji + textAfter;
                    textarea.focus();
                    textarea.setSelectionRange(cursorPos + emoji.length, cursorPos + emoji.length);
                    updateContentLength();
                    document.getElementById('emojiPicker').classList.add('hidden');
                });
                container.appendChild(emojiBtn);
            });
        }

        // æ›´æ–°å†…å®¹é•¿åº¦
        function updateContentLength() {
            const content = document.getElementById('messageContent').value;
            const length = content.length;
            document.getElementById('contentLength').textContent = `${length}/200`;
            
            if (length > 200) {
                document.getElementById('contentLength').className = 'text-xs text-red-500';
            } else if (length > 180) {
                document.getElementById('contentLength').className = 'text-xs text-yellow-500';
            } else {
                document.getElementById('contentLength').className = 'text-xs text-gray-500';
            }
        }

        // è®¾ç½®æ´»è·ƒæŒ‰é’®
        function setActiveButton(activeBtn, buttonIds) {
            buttonIds.forEach(id => {
                const btn = document.getElementById(id);
                if (btn === activeBtn) {
                    btn.className = 'px-3 py-1 text-sm bg-green-500 text-white rounded';
                } else {
                    btn.className = 'px-3 py-1 text-sm text-gray-600 bg-gray-100 rounded';
                }
            });
        }

        // æ¶ˆæ¯æ“ä½œå‡½æ•°
        function viewMessage(id) {
            alert(`æŸ¥çœ‹æ¶ˆæ¯ ID: ${id}`);
        }

        function editMessage(id) {
            alert(`ç¼–è¾‘æ¶ˆæ¯ ID: ${id}`);
        }

        function duplicateMessage(id) {
            alert(`å¤åˆ¶æ¶ˆæ¯ ID: ${id}`);
        }

        function deleteMessage(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™æ¡æ¶ˆæ¯å—ï¼Ÿ')) {
                alert(`åˆ é™¤æ¶ˆæ¯ ID: ${id}`);
            }
        }

        // æ¨¡æ¿æ“ä½œå‡½æ•°
        function useTemplate(id) {
            const template = pushData.templates.find(t => t.id === id);
            if (template) {
                document.getElementById('messageTitle').value = template.title;
                document.getElementById('messageContent').value = template.content;
                document.getElementById('messageChannel').value = template.channel;
                updateContentLength();
                document.getElementById('templatesModal').classList.add('hidden');
                document.getElementById('templatesModal').classList.remove('flex');
                document.getElementById('createMessageModal').classList.remove('hidden');
                document.getElementById('createMessageModal').classList.add('flex');
            }
        }

        function editTemplate(id) {
            alert(`ç¼–è¾‘æ¨¡æ¿ ID: ${id}`);
        }

        function deleteTemplate(id) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªæ¨¡æ¿å—ï¼Ÿ')) {
                alert(`åˆ é™¤æ¨¡æ¿ ID: ${id}`);
            }
        }

        // äº‹ä»¶ç»‘å®š
        document.getElementById('trendSent').addEventListener('click', function() {
            setActiveButton(this, ['trendSent', 'trendClick', 'trendConversion']);
            initPushTrendChart('sent');
        });

        document.getElementById('trendClick').addEventListener('click', function() {
            setActiveButton(this, ['trendSent', 'trendClick', 'trendConversion']);
            initPushTrendChart('click');
        });

        document.getElementById('trendConversion').addEventListener('click', function() {
            setActiveButton(this, ['trendSent', 'trendClick', 'trendConversion']);
            initPushTrendChart('conversion');
        });

        document.getElementById('createMessage').addEventListener('click', function() {
            document.getElementById('createMessageModal').classList.remove('hidden');
            document.getElementById('createMessageModal').classList.add('flex');
        });

        document.getElementById('messageTemplates').addEventListener('click', function() {
            document.getElementById('templatesModal').classList.remove('hidden');
            document.getElementById('templatesModal').classList.add('flex');
        });

        document.getElementById('closeCreateModal').addEventListener('click', function() {
            document.getElementById('createMessageModal').classList.add('hidden');
            document.getElementById('createMessageModal').classList.remove('flex');
        });

        document.getElementById('closeTemplatesModal').addEventListener('click', function() {
            document.getElementById('templatesModal').classList.add('hidden');
            document.getElementById('templatesModal').classList.remove('flex');
        });

        document.getElementById('addEmoji').addEventListener('click', function() {
            const picker = document.getElementById('emojiPicker');
            picker.classList.toggle('hidden');
        });

        document.getElementById('messageContent').addEventListener('input', updateContentLength);

        document.getElementById('sendTime').addEventListener('change', function() {
            const container = document.getElementById('scheduledTimeContainer');
            if (this.value === 'scheduled') {
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        });

        document.getElementById('sendMessage').addEventListener('click', function() {
            alert('æ¶ˆæ¯å‘é€æˆåŠŸï¼');
            document.getElementById('createMessageModal').classList.add('hidden');
            document.getElementById('createMessageModal').classList.remove('flex');
        });

        document.getElementById('saveDraft').addEventListener('click', function() {
            alert('è‰ç¨¿ä¿å­˜æˆåŠŸï¼');
        });

        document.getElementById('previewMessage').addEventListener('click', function() {
            alert('æ¶ˆæ¯é¢„è§ˆåŠŸèƒ½');
        });

        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initPushTrendChart('sent');
            initChannelChart();
            renderMessagesList();
            renderTemplatesList();
            generateEmojiPicker();
            console.log('æ¶ˆæ¯æ¨é€é¡µé¢åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
</body>
</html>