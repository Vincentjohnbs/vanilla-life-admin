<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>奖励管理 - 香草生活后台管理系统</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .sidebar-item:hover { background-color: #f3f4f6; }
        .sidebar-item.active { background-color: #10b981; color: white; }
        .tab-item { transition: all 0.3s ease; }
        .tab-item.active { border-bottom-color: #10b981; color: #10b981; }
        .reward-card { transition: all 0.3s ease; }
        .reward-card:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .reward-type-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }
        .reward-type-points { background-color: #dbeafe; color: #1e40af; }
        .reward-type-coupon { background-color: #dcfce7; color: #166534; }
        .reward-type-gift { background-color: #fef3c7; color: #92400e; }
        .reward-type-badge-vip { background-color: #f3e8ff; color: #7c3aed; }
        .status-active { background-color: #dcfce7; color: #166534; }
        .status-inactive { background-color: #fee2e2; color: #dc2626; }
        .status-expired { background-color: #f3f4f6; color: #6b7280; }
        .gradient-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="bg-gray-50">
    <!-- 侧边栏 -->
    <div class="fixed inset-y-0 left-0 w-64 bg-white shadow-lg z-50">
        <div class="flex items-center justify-center h-16 border-b border-gray-200">
            <h1 class="text-xl font-bold text-gray-800">香草生活管理</h1>
        </div>
        <nav class="mt-8">
            <div class="px-4 space-y-2">
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-tachometer-alt mr-3"></i>仪表盘
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-box mr-3"></i>商品管理
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-shopping-cart mr-3"></i>订单管理
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-users mr-3"></i>用户管理
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-bullhorn mr-3"></i>营销活动
                </a>
                <a href="#" class="sidebar-item active flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-calendar-plus mr-3"></i>活动报名
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-truck mr-3"></i>供应商管理
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-leaf mr-3"></i>香草图鉴
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-seedling mr-3"></i>香草阳台
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-images mr-3"></i>Banner管理
                </a>
                <a href="#" class="sidebar-item flex items-center px-4 py-3 text-gray-700 rounded-lg">
                    <i class="fas fa-cog mr-3"></i>系统设置
                </a>
            </div>
        </nav>
    </div>

    <!-- 主内容区域 -->
    <div class="ml-64 flex-1">
        <!-- 顶部导航栏 -->
        <header class="bg-white shadow-sm border-b border-gray-200">
            <div class="flex items-center justify-between px-6 py-4">
                <div class="flex items-center space-x-4">
                    <button id="sidebar-toggle" class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <a href="#" class="text-gray-500 hover:text-gray-700">活动报名</a>
                        <i class="fas fa-chevron-right text-gray-400 text-sm"></i>
                        <span class="text-gray-900 font-medium">奖励管理</span>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="create-reward-btn" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>创建奖励
                    </button>
                    <button id="batch-manage-btn" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        <i class="fas fa-tasks mr-2"></i>批量管理
                    </button>
                    <button class="text-gray-500 hover:text-gray-700">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div class="flex items-center space-x-2">
                        <img src="https://via.placeholder.com/32" alt="用户头像" class="w-8 h-8 rounded-full">
                        <span class="text-sm text-gray-700">管理员</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- 页面头部 -->
        <div class="p-6">
            <div class="gradient-header text-white p-6 rounded-xl mb-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold mb-2">奖励管理</h1>
                        <p class="text-purple-100">管理活动奖励机制，激励用户参与度和忠诚度</p>
                    </div>
                    <div class="flex items-center space-x-6">
                        <div class="text-center">
                            <div class="text-2xl font-bold">156</div>
                            <div class="text-sm text-purple-100">活跃奖励</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold">¥12,580</div>
                            <div class="text-sm text-purple-100">本月发放</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold">2,341</div>
                            <div class="text-sm text-purple-100">领取人次</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 统计卡片 -->
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">总奖励数</p>
                            <p class="text-2xl font-bold text-gray-900">156</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+12
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-gift text-blue-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">本月发放</p>
                            <p class="text-2xl font-bold text-gray-900">¥12,580</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+23.5%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-coins text-green-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">领取率</p>
                            <p class="text-2xl font-bold text-gray-900">78.3%</p>
                            <p class="text-sm text-green-600 mt-1">
                                <i class="fas fa-arrow-up mr-1"></i>+5.2%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-percentage text-orange-600 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm text-gray-600">平均价值</p>
                            <p class="text-2xl font-bold text-gray-900">¥53.7</p>
                            <p class="text-sm text-red-600 mt-1">
                                <i class="fas fa-arrow-down mr-1"></i>-2.1%
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <i class="fas fa-chart-line text-purple-600 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 筛选和操作栏 -->
            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <input type="text" id="search-input" placeholder="搜索奖励名称..." class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg w-64">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                        
                        <select id="type-filter" class="px-4 py-2 border border-gray-300 rounded-lg">
                            <option value="">全部类型</option>
                            <option value="points">积分奖励</option>
                            <option value="coupon">优惠券</option>
                            <option value="gift">实物奖品</option>
                            <option value="vip">会员权益</option>
                        </select>
                        
                        <select id="status-filter" class="px-4 py-2 border border-gray-300 rounded-lg">
                            <option value="">全部状态</option>
                            <option value="active">进行中</option>
                            <option value="inactive">已暂停</option>
                            <option value="expired">已过期</option>
                        </select>
                        
                        <select id="activity-filter" class="px-4 py-2 border border-gray-300 rounded-lg">
                            <option value="">全部活动</option>
                            <option value="workshop">香草种植工作坊</option>
                            <option value="cooking">香草料理课程</option>
                            <option value="garden">香草花园参观</option>
                        </select>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <button id="reset-filter" class="px-3 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50">
                            <i class="fas fa-undo mr-1"></i>重置
                        </button>
                        <button id="export-data" class="px-3 py-2 text-blue-600 border border-blue-300 rounded-lg hover:bg-blue-50">
                            <i class="fas fa-download mr-1"></i>导出
                        </button>
                        <button id="refresh-data" class="px-3 py-2 text-green-600 border border-green-300 rounded-lg hover:bg-green-50">
                            <i class="fas fa-sync-alt mr-1"></i>刷新
                        </button>
                    </div>
                </div>
            </div>

            <!-- 标签页导航 -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                <div class="border-b border-gray-200">
                    <nav class="flex space-x-8 px-6">
                        <button class="tab-item py-4 px-1 border-b-2 border-transparent font-medium text-sm active" data-tab="rewards">
                            奖励列表
                        </button>
                        <button class="tab-item py-4 px-1 border-b-2 border-transparent font-medium text-sm" data-tab="templates">
                            奖励模板
                        </button>
                        <button class="tab-item py-4 px-1 border-b-2 border-transparent font-medium text-sm" data-tab="rules">
                            发放规则
                        </button>
                        <button class="tab-item py-4 px-1 border-b-2 border-transparent font-medium text-sm" data-tab="statistics">
                            统计分析
                        </button>
                        <button class="tab-item py-4 px-1 border-b-2 border-transparent font-medium text-sm" data-tab="history">
                            发放记录
                        </button>
                    </nav>
                </div>

                <!-- 奖励列表标签页 -->
                <div id="rewards-tab" class="tab-content p-6">
                    <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6" id="rewards-grid">
                        <!-- 奖励卡片将通过JavaScript动态生成 -->
                    </div>
                </div>

                <!-- 奖励模板标签页 -->
                <div id="templates-tab" class="tab-content p-6 hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
                        <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">新用户注册奖励</h3>
                                <span class="reward-type-points">积分奖励</span>
                            </div>
                            <div class="space-y-3">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">奖励内容：</span>
                                    <span class="font-medium">100积分</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">触发条件：</span>
                                    <span class="font-medium">完成注册</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">使用次数：</span>
                                    <span class="font-medium">1,234次</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200">
                                <button class="text-blue-600 hover:text-blue-700 text-sm">
                                    <i class="fas fa-copy mr-1"></i>使用模板
                                </button>
                                <button class="text-gray-600 hover:text-gray-700 text-sm">
                                    <i class="fas fa-edit mr-1"></i>编辑
                                </button>
                            </div>
                        </div>

                        <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">活动参与奖励</h3>
                                <span class="reward-type-coupon">优惠券</span>
                            </div>
                            <div class="space-y-3">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">奖励内容：</span>
                                    <span class="font-medium">20元优惠券</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">触发条件：</span>
                                    <span class="font-medium">完成活动报名</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">使用次数：</span>
                                    <span class="font-medium">856次</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200">
                                <button class="text-blue-600 hover:text-blue-700 text-sm">
                                    <i class="fas fa-copy mr-1"></i>使用模板
                                </button>
                                <button class="text-gray-600 hover:text-gray-700 text-sm">
                                    <i class="fas fa-edit mr-1"></i>编辑
                                </button>
                            </div>
                        </div>

                        <div class="reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-semibold">优秀学员奖励</h3>
                                <span class="reward-type-gift">实物奖品</span>
                            </div>
                            <div class="space-y-3">
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">奖励内容：</span>
                                    <span class="font-medium">香草种植套装</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">触发条件：</span>
                                    <span class="font-medium">活动评分≥4.5</span>
                                </div>
                                <div class="flex justify-between text-sm">
                                    <span class="text-gray-600">使用次数：</span>
                                    <span class="font-medium">123次</span>
                                </div>
                            </div>
                            <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200">
                                <button class="text-blue-600 hover:text-blue-700 text-sm">
                                    <i class="fas fa-copy mr-1"></i>使用模板
                                </button>
                                <button class="text-gray-600 hover:text-gray-700 text-sm">
                                    <i class="fas fa-edit mr-1"></i>编辑
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 发放规则标签页 -->
                <div id="rules-tab" class="tab-content p-6 hidden">
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">自动发放规则</h3>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <h4 class="font-medium">注册完成自动发放</h4>
                                        <p class="text-sm text-gray-600 mt-1">用户完成注册后自动发放100积分</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-active">已启用</span>
                                        <button class="text-blue-600 hover:text-blue-700">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <h4 class="font-medium">活动完成自动发放</h4>
                                        <p class="text-sm text-gray-600 mt-1">用户完成活动后根据评分自动发放相应奖励</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-active">已启用</span>
                                        <button class="text-blue-600 hover:text-blue-700">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </div>

                                <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                                    <div>
                                        <h4 class="font-medium">推荐好友奖励</h4>
                                        <p class="text-sm text-gray-600 mt-1">成功推荐好友注册并参与活动后发放奖励</p>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-inactive">已暂停</span>
                                        <button class="text-blue-600 hover:text-blue-700">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">手动发放规则</h3>
                            <div class="space-y-4">
                                <div class="p-4 bg-blue-50 rounded-lg">
                                    <h4 class="font-medium text-blue-900">批量发放权限</h4>
                                    <p class="text-sm text-blue-700 mt-1">仅管理员和运营人员可进行批量奖励发放</p>
                                </div>
                                <div class="p-4 bg-yellow-50 rounded-lg">
                                    <h4 class="font-medium text-yellow-900">审核机制</h4>
                                    <p class="text-sm text-yellow-700 mt-1">单次发放价值超过100元的奖励需要主管审核</p>
                                </div>
                                <div class="p-4 bg-green-50 rounded-lg">
                                    <h4 class="font-medium text-green-900">发放记录</h4>
                                    <p class="text-sm text-green-700 mt-1">所有奖励发放操作都会记录操作人和操作时间</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 统计分析标签页 -->
                <div id="statistics-tab" class="tab-content p-6 hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">奖励发放趋势</h3>
                            <canvas id="reward-trend-chart" width="400" height="300"></canvas>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">奖励类型分布</h3>
                            <canvas id="reward-type-chart" width="400" height="300"></canvas>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">用户领取率</h3>
                            <canvas id="claim-rate-chart" width="400" height="300"></canvas>
                        </div>

                        <div class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                            <h3 class="text-lg font-semibold mb-4">成本效益分析</h3>
                            <canvas id="cost-benefit-chart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>

                <!-- 发放记录标签页 -->
                <div id="history-tab" class="tab-content p-6 hidden">
                    <div class="bg-white rounded-lg shadow-sm border border-gray-200">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">用户</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">奖励内容</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">类型</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">价值</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">发放时间</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">状态</th>
                                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                                    </tr>
                                </thead>
                                <tbody class="bg-white divide-y divide-gray-200" id="history-table-body">
                                    <!-- 记录将通过JavaScript动态生成 -->
                                </tbody>
                            </table>
                        </div>
                        <div class="px-6 py-4 border-t border-gray-200">
                            <div class="flex items-center justify-between">
                                <div class="text-sm text-gray-700">
                                    显示 1-10 条，共 234 条记录
                                </div>
                                <div class="flex items-center space-x-2">
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50">上一页</button>
                                    <button class="px-3 py-1 text-sm bg-blue-600 text-white rounded">1</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50">2</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50">3</button>
                                    <button class="px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50">下一页</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 创建奖励模态框 -->
    <div id="create-reward-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
                <div class="flex items-center justify-between p-6 border-b border-gray-200">
                    <h3 class="text-lg font-semibold">创建奖励</h3>
                    <button id="close-create-modal" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="p-6">
                    <form id="create-reward-form" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">奖励名称</label>
                                <input type="text" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="请输入奖励名称">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">奖励类型</label>
                                <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                                    <option value="points">积分奖励</option>
                                    <option value="coupon">优惠券</option>
                                    <option value="gift">实物奖品</option>
                                    <option value="vip">会员权益</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">奖励描述</label>
                            <textarea class="w-full px-3 py-2 border border-gray-300 rounded-lg" rows="3" placeholder="请输入奖励描述"></textarea>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">奖励价值</label>
                                <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="请输入奖励价值">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">库存数量</label>
                                <input type="number" class="w-full px-3 py-2 border border-gray-300 rounded-lg" placeholder="请输入库存数量">
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">开始时间</label>
                                <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">结束时间</label>
                                <input type="datetime-local" class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">发放条件</label>
                            <div class="space-y-2">
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm">完成活动报名</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm">活动评分≥4.0</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm">首次参与活动</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="mr-2">
                                    <span class="text-sm">推荐好友参与</span>
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="flex items-center justify-end space-x-4 p-6 border-t border-gray-200">
                    <button id="cancel-create" class="px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50">
                        取消
                    </button>
                    <button id="save-reward" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                        保存奖励
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTab = 'rewards';
        let rewards = [
            {
                id: 1,
                name: '新用户注册奖励',
                type: 'points',
                value: '100积分',
                description: '完成注册即可获得100积分奖励',
                activity: '全平台',
                status: 'active',
                stock: 999,
                claimed: 1234,
                startTime: '2024-01-01',
                endTime: '2024-12-31'
            },
            {
                id: 2,
                name: '活动参与优惠券',
                type: 'coupon',
                value: '20元优惠券',
                description: '参与任意活动即可获得20元优惠券',
                activity: '香草种植工作坊',
                status: 'active',
                stock: 500,
                claimed: 856,
                startTime: '2024-02-01',
                endTime: '2024-06-30'
            },
            {
                id: 3,
                name: '优秀学员奖品',
                type: 'gift',
                value: '香草种植套装',
                description: '活动评分4.5分以上可获得香草种植套装',
                activity: '香草料理课程',
                status: 'active',
                stock: 50,
                claimed: 23,
                startTime: '2024-03-01',
                endTime: '2024-05-31'
            },
            {
                id: 4,
                name: 'VIP会员升级',
                type: 'vip',
                value: '3个月VIP',
                description: '连续参与3次活动可获得VIP会员权益',
                activity: '香草花园参观',
                status: 'inactive',
                stock: 100,
                claimed: 45,
                startTime: '2024-04-01',
                endTime: '2024-08-31'
            }
        ];

        let historyRecords = [
            {
                user: '张小花',
                reward: '新用户注册奖励',
                type: 'points',
                value: '100积分',
                time: '2024-01-15 10:30',
                status: 'claimed'
            },
            {
                user: '李园丁',
                reward: '活动参与优惠券',
                type: 'coupon',
                value: '20元',
                time: '2024-01-15 09:15',
                status: 'claimed'
            },
            {
                user: '王香草',
                reward: '优秀学员奖品',
                type: 'gift',
                value: '种植套装',
                time: '2024-01-14 16:45',
                status: 'pending'
            }
        ];

        // 标签页切换
        document.querySelectorAll('.tab-item').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.add('hidden');
                });
                
                currentTab = this.getAttribute('data-tab');
                document.getElementById(currentTab + '-tab').classList.remove('hidden');
                
                if (currentTab === 'rewards') {
                    renderRewards();
                } else if (currentTab === 'statistics') {
                    initStatisticsCharts();
                } else if (currentTab === 'history') {
                    renderHistory();
                }
            });
        });

        // 渲染奖励列表
        function renderRewards() {
            const grid = document.getElementById('rewards-grid');
            grid.innerHTML = '';
            
            rewards.forEach(reward => {
                const rewardCard = createRewardCard(reward);
                grid.appendChild(rewardCard);
            });
        }

        // 创建奖励卡片
        function createRewardCard(reward) {
            const card = document.createElement('div');
            card.className = 'reward-card bg-white p-6 rounded-lg shadow-sm border border-gray-200';
            
            const typeClass = `reward-type-${reward.type}`;
            const statusClass = `status-${reward.status}`;
            
            card.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold">${reward.name}</h3>
                    <span class="${typeClass}">${getTypeLabel(reward.type)}</span>
                </div>
                <div class="space-y-3">
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">奖励内容：</span>
                        <span class="font-medium">${reward.value}</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">关联活动：</span>
                        <span class="font-medium">${reward.activity}</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">库存/已领：</span>
                        <span class="font-medium">${reward.stock}/${reward.claimed}</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span class="text-gray-600">状态：</span>
                        <span class="${statusClass}">${getStatusLabel(reward.status)}</span>
                    </div>
                </div>
                <div class="mt-4 pt-4 border-t border-gray-200">
                    <p class="text-sm text-gray-600 mb-3">${reward.description}</p>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-2">
                            <button class="text-blue-600 hover:text-blue-700 text-sm" onclick="editReward(${reward.id})">
                                <i class="fas fa-edit mr-1"></i>编辑
                            </button>
                            <button class="text-green-600 hover:text-green-700 text-sm" onclick="viewDetails(${reward.id})">
                                <i class="fas fa-eye mr-1"></i>详情
                            </button>
                        </div>
                        <div class="flex items-center space-x-2">
                            <button class="text-orange-600 hover:text-orange-700 text-sm" onclick="toggleStatus(${reward.id})">
                                <i class="fas fa-power-off mr-1"></i>${reward.status === 'active' ? '暂停' : '启用'}
                            </button>
                            <button class="text-red-600 hover:text-red-700 text-sm" onclick="deleteReward(${reward.id})">
                                <i class="fas fa-trash mr-1"></i>删除
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            return card;
        }

        // 渲染发放记录
        function renderHistory() {
            const tbody = document.getElementById('history-table-body');
            tbody.innerHTML = '';
            
            historyRecords.forEach(record => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <img class="h-8 w-8 rounded-full" src="https://via.placeholder.com/32" alt="">
                            <div class="ml-3">
                                <div class="text-sm font-medium text-gray-900">${record.user}</div>
                            </div>
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.reward}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="reward-type-${record.type}">${getTypeLabel(record.type)}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.value}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${record.time}</td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="status-${record.status === 'claimed' ? 'active' : 'inactive'}">
                            ${record.status === 'claimed' ? '已领取' : '待领取'}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <button class="text-blue-600 hover:text-blue-900 mr-2">查看</button>
                        <button class="text-red-600 hover:text-red-900">撤销</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // 初始化统计图表
        function initStatisticsCharts() {
            // 奖励发放趋势
            const trendCtx = document.getElementById('reward-trend-chart');
            if (trendCtx) {
                new Chart(trendCtx, {
                    type: 'line',
                    data: {
                        labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
                        datasets: [{
                            label: '发放数量',
                            data: [120, 190, 300, 500, 200, 300],
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // 奖励类型分布
            const typeCtx = document.getElementById('reward-type-chart');
            if (typeCtx) {
                new Chart(typeCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['积分奖励', '优惠券', '实物奖品', '会员权益'],
                        datasets: [{
                            data: [45, 30, 15, 10],
                            backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6']
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false
                    }
                });
            }

            // 用户领取率
            const claimCtx = document.getElementById('claim-rate-chart');
            if (claimCtx) {
                new Chart(claimCtx, {
                    type: 'bar',
                    data: {
                        labels: ['积分奖励', '优惠券', '实物奖品', '会员权益'],
                        datasets: [{
                            label: '领取率(%)',
                            data: [85, 72, 45, 68],
                            backgroundColor: 'rgba(59, 130, 246, 0.8)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100
                            }
                        }
                    }
                });
            }

            // 成本效益分析
            const costCtx = document.getElementById('cost-benefit-chart');
            if (costCtx) {
                new Chart(costCtx, {
                    type: 'scatter',
                    data: {
                        datasets: [{
                            label: '成本-效益',
                            data: [
                                {x: 100, y: 85}, {x: 200, y: 72}, {x: 500, y: 45}, {x: 300, y: 68}
                            ],
                            backgroundColor: 'rgba(16, 185, 129, 0.6)'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { title: { display: true, text: '成本(元)' } },
                            y: { title: { display: true, text: '效益指数' } }
                        }
                    }
                });
            }
        }

        // 工具函数
        function getTypeLabel(type) {
            const labels = {
                'points': '积分奖励',
                'coupon': '优惠券',
                'gift': '实物奖品',
                'vip': '会员权益'
            };
            return labels[type] || type;
        }

        function getStatusLabel(status) {
            const labels = {
                'active': '进行中',
                'inactive': '已暂停',
                'expired': '已过期'
            };
            return labels[status] || status;
        }

        // 事件处理函数
        function editReward(id) {
            console.log('编辑奖励:', id);
            // 打开编辑模态框
        }

        function viewDetails(id) {
            console.log('查看详情:', id);
            // 显示奖励详情
        }

        function toggleStatus(id) {
            console.log('切换状态:', id);
            const reward = rewards.find(r => r.id === id);
            if (reward) {
                reward.status = reward.status === 'active' ? 'inactive' : 'active';
                renderRewards();
            }
        }

        function deleteReward(id) {
            console.log('删除奖励:', id);
            if (confirm('确定要删除这个奖励吗？')) {
                rewards = rewards.filter(r => r.id !== id);
                renderRewards();
            }
        }

        // 模态框控制
        document.getElementById('create-reward-btn').addEventListener('click', function() {
            document.getElementById('create-reward-modal').classList.remove('hidden');
        });

        document.getElementById('close-create-modal').addEventListener('click', function() {
            document.getElementById('create-reward-modal').classList.add('hidden');
        });

        document.getElementById('cancel-create').addEventListener('click', function() {
            document.getElementById('create-reward-modal').classList.add('hidden');
        });

        document.getElementById('save-reward').addEventListener('click', function() {
            console.log('保存奖励');
            // 处理表单提交
            document.getElementById('create-reward-modal').classList.add('hidden');
        });

        // 筛选事件
        document.getElementById('search-input').addEventListener('input', function() {
            console.log('搜索:', this.value);
        });

        document.getElementById('type-filter').addEventListener('change', function() {
            console.log('类型筛选:', this.value);
        });

        document.getElementById('status-filter').addEventListener('change', function() {
            console.log('状态筛选:', this.value);
        });

        document.getElementById('activity-filter').addEventListener('change', function() {
            console.log('活动筛选:', this.value);
        });

        // 其他按钮事件
        document.getElementById('batch-manage-btn').addEventListener('click', function() {
            console.log('批量管理');
        });

        document.getElementById('reset-filter').addEventListener('click', function() {
            console.log('重置筛选');
        });

        document.getElementById('export-data').addEventListener('click', function() {
            console.log('导出数据');
        });

        document.getElementById('refresh-data').addEventListener('click', function() {
            console.log('刷新数据');
            renderRewards();
        });

        // 初始化
        renderRewards();
    </script>
</body>
</html>